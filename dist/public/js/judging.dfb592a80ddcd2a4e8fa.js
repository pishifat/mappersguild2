(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"/UFM":function(t,e,i){"use strict";i.r(e);var s=i("Qdcc"),n=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,(function(){return s[t]}))}(o);e.default=n.a},"7OI8":function(t,e,i){"use strict";var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{d(s.next(t))}catch(t){o(t)}}function a(t){try{d(s.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}d((s=s.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=n(i("oCYn")),r=i("L2JU");e.default=o.default.extend({name:"EditingCriteriaModal",data:()=>({editingScore:0,editingComment:""}),computed:Object.assign(Object.assign({},r.mapState(["judgingDone"])),r.mapGetters(["editingSubmission","editingCriteria"])),watch:{editingSubmission(){this.getUserInput()},editingCriteria(){this.getUserInput()}},methods:{getUserInput(){const t=this.getJudgingToCriterias(this.editingSubmission.id,this.editingCriteria.id);t?(this.editingScore=t.score,this.editingComment=t.comment):(this.editingScore=0,this.editingComment="")},getJudgingToCriterias(t,e){const i=this.judgingDone.find(e=>e.submission.id===t);if(!i)return null;const s=i.judgingScores.find(t=>t.criteria.id===e);return s||null},save(t){var e,i;return s(this,void 0,void 0,(function*(){const s=yield this.executePost("/judging/save",{submissionId:null===(e=this.editingSubmission)||void 0===e?void 0:e.id,criteriaId:null===(i=this.editingCriteria)||void 0===i?void 0:i.id,score:this.editingScore,comment:this.editingComment},t);this.isError(s)||(this.$store.commit("setJudgingDone",s.judgingDone),this.$store.dispatch("updateToastMessages",{message:s.success,type:"info"}))}))},closeModal(){var t;null===(t=document.getElementById("close-button"))||void 0===t||t.click()}}})},"7bO+":function(t,e,i){"use strict";i.r(e);var s=i("V/l8"),n=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,(function(){return s[t]}))}(o);e.default=n.a},"82fW":function(t,e,i){"use strict";i.r(e);var s=i("rQUL"),n=i("7bO+");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("F/lc");var r=i("KHd+"),a=Object(r.a)(n.default,s.a,s.b,!1,null,null,null);a.options.__file="src/components/ToastMessages.vue",e.default=a.exports},"F/lc":function(t,e,i){"use strict";var s=i("ccWs");i.n(s).a},Fsy3:function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i("oCYn")),o=s(i("L2JU")),r=s(i("c11G"));i("qIrM");const a=s(i("vCLK")),d=s(i("Z1WV"));n.default.mixin(a.default),n.default.use(o.default);const c=new o.default.Store({modules:{toasts:d.default},state:{contest:null,criterias:[],judgingDone:[],editingSubmissionId:null,editingCriteriaId:null},mutations:{setContest(t,e){t.contest=e},setCriterias(t,e){t.criterias=e},setJudgingDone(t,e){t.judgingDone=e},setEditingSubmissionId(t,e){t.editingSubmissionId=e},setEditingCriteriaId(t,e){t.editingCriteriaId=e}},getters:{editingSubmission:t=>{var e;return null===(e=t.contest)||void 0===e?void 0:e.submissions.find(e=>e.id===t.editingSubmissionId)},editingCriteria:t=>t.criterias.find(e=>e.id===t.editingCriteriaId)}});new n.default({el:"#app",store:c,components:{JudgingPage:r.default}})},NsCO:function(t,e,i){(t.exports=i("JPst")(!1)).push([t.i,"\n.toast {\r\n    -webkit-animation: fadeOutAnimation 0.5s ease-in 3s forwards;\r\n    -moz-animation: fadeOutAnimation 0.5s ease-in 3s forwards;\r\n    -o-animation: fadeOutAnimation 0.5s ease-in 3s forwards;\r\n    animation: fadeOutAnimation 0.5s ease-in 3s forwards;\r\n    -webkit-animation-fill-mode: forwards;\r\n    animation-fill-mode: forwards;\n}\n@keyframes fadeOutAnimation {\nfrom {\r\n        display: block;\r\n        opacity: 1;\n}\nto {\r\n        display: none;\r\n        opacity: 0;\n}\n}\n@-webkit-keyframes fadeOutAnimation {\nfrom {\r\n        display: block;\r\n        opacity: 1;\n}\nto {\r\n        display: none;\r\n        opacity: 0;\n}\n}\r\n",""])},Qdcc:function(t,e,i){"use strict";var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{d(s.next(t))}catch(t){o(t)}}function a(t){try{d(s.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}d((s=s.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=n(i("oCYn")),r=n(i("82fW")),a=n(i("tfpH")),d=i("L2JU");e.default=o.default.extend({name:"JudgingPage",components:{ToastMessages:r.default,EditingCriteriaModal:a.default},data:()=>({sortBy:"name",sortByCriteria:"",sortDesc:!1}),computed:Object.assign(Object.assign({},d.mapState(["contest","criterias","judgingDone"])),{filteredSubmissions(){const t=[...this.contest.submissions];for(let e=0;e<t.length;e++){const i=t[e].evaluations.reduce((t,e)=>e.vote?t+e.vote:t,0);t[e].total=i}return this.contest.submissions.filter(t=>t.total>=this.contest.judgingThreshold)},sortedSubmissions(){const t=this.filteredSubmissions;return t?("name"===this.sortBy?t.sort((t,e)=>{var i,s;const n=null===(i=t.name)||void 0===i?void 0:i.toUpperCase(),o=null===(s=e.name)||void 0===s?void 0:s.toUpperCase();return n<o?this.sortDesc?-1:1:n>o?this.sortDesc?1:-1:0}):"total"===this.sortBy?t.sort((t,e)=>{const i=this.getTotalScore(t.id),s=this.getTotalScore(e.id);return this.sortDesc?i-s:s-i}):"criteria"===this.sortBy?t.sort((t,e)=>{const i=this.getScore(t.id,this.sortByCriteria),s=this.getScore(e.id,this.sortByCriteria);return this.sortDesc?i-s:s-i}):"completed"===this.sortBy&&t.sort((t,e)=>{const i=this.isCompleted(t.id);return i===this.isCompleted(e.id)?0:this.sortDesc?i?1:-1:i?-1:1}),t):[]},maxPossibleScore(){return this.criterias.reduce((t,e)=>e.maxScore+t,0)}}),created(){return s(this,void 0,void 0,(function*(){const t=yield this.executeGet("/judging/relevantInfo");this.isError(t)||(this.$store.commit("setContest",t.contest),this.$store.commit("setCriterias",t.criterias),this.$store.commit("setJudgingDone",t.judgingDone)),$("#loading").fadeOut(),$("#app").attr("style","visibility: visible").hide().fadeIn()}))},methods:{selectForEditing(t,e){this.$store.commit("setEditingSubmissionId",t),this.$store.commit("setEditingCriteriaId",e)},getJudgingToCriterias(t,e){const i=this.judgingDone.find(e=>e.submission.id===t);if(!i)return null;const s=i.judgingScores.find(t=>t.criteria.id===e);return s||null},getScore(t,e){const i=this.getJudgingToCriterias(t,e);return i?i.score:0},getTotalScore(t){const e=this.judgingDone.find(e=>e.submission.id===t);return e?e.judgingScores.reduce((t,e)=>e.score+t,0):0},isCompleted(t){const e=this.judgingDone.find(e=>e.submission.id===t);return!!e&&e.judgingScores.length===this.criterias.length},sortSubmissionsBy(t,e){this.sortBy=t,this.sortDesc=!this.sortDesc,"criteria"===t&&e&&(this.sortByCriteria=e)}}})},"V/l8":function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i("oCYn")),o=i("L2JU");e.default=n.default.extend({computed:Object.assign({},o.mapState({toastMessages:t=>t.toasts.toastMessages})),methods:{getToastTypeClass:t=>"success"===t.type?"bg-success":"info"===t.type?"bg-info":"bg-danger"}})},Z1WV:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s={namespace:!1,state:{toastMessages:[]},mutations:{addToastMessage(t,e){t.toastMessages.push(e)},removeFirstToastMessage(t){t.toastMessages.splice(0,1)}},actions:{updateToastMessages({commit:t},e){t("addToastMessage",e),setTimeout(()=>{t("removeFirstToastMessage")},3500)}}};e.default=s},afZf:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return n}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.editingSubmission&&t.editingCriteria?i("div",{staticClass:"modal fade",attrs:{id:"editing-judging-modal",tabindex:"-1","data-backdrop":"static","data-keyboard":"false"}},[i("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[i("div",{staticClass:"modal-content bg-dark"},[i("div",{staticClass:"modal-header bg-orange text-dark"},[i("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[t._v("\n                        "+t._s(t.editingSubmission.name)+": "),i("span",{staticClass:"text-capitalize"},[t._v(t._s(t.editingCriteria.name))])]),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticClass:"modal-body"},["comments"!=t.editingCriteria.name?i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"score"}},[t._v("Score")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editingScore,expression:"editingScore"}],staticClass:"form-control",attrs:{id:"score",type:"number",step:"1",min:"0",max:t.editingCriteria.maxScore},domProps:{value:t.editingScore},on:{input:function(e){e.target.composing||(t.editingScore=e.target.value)}}})]):i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"comment"}},[t._v("\n                            Comment\n                        ")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editingComment,expression:"editingComment"}],staticClass:"form-control",attrs:{id:"comment",maxlength:"3000",rows:"4"},domProps:{value:t.editingComment},on:{input:function(e){e.target.composing||(t.editingComment=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.closeModal()}}},[t._v("\n                        Close\n                    ")]),t._v(" "),i("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("\n                        Save changes\n                    ")]),t._v(" "),i("div",{attrs:{id:"close-button","data-dismiss":"modal"}})])])])]):t._e()])},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[e("span",[this._v("Ã—")])])}];s._withStripped=!0},c11G:function(t,e,i){"use strict";i.r(e);var s=i("fagI"),n=i("/UFM");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("hDfH");var r=i("KHd+"),a=Object(r.a)(n.default,s.a,s.b,!1,null,"2c099362",null);a.options.__file="src/pages/JudgingPage.vue",e.default=a.exports},ccWs:function(t,e,i){var s=i("NsCO");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,i("SZ7m").default)("dbaab28e",s,!1,{})},fagI:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return n}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[t.contest?i("div",{staticClass:"row mb-2"},[i("div",{staticClass:"col-sm"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-header"},[i("h4",{staticClass:"text-center my-2"},[t._v("\n                        "+t._s(t.contest.name)+"\n                    ")])]),t._v(" "),i("div",{staticClass:"card-body p-0"},[i("table",{staticClass:"table table-hover table-responsive-sm"},[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[i("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.sortSubmissionsBy("name")}}},[t._v("\n                                        Entry's Name\n                                    ")])]),t._v(" "),t._l(t.criterias,(function(e){return i("th",{key:e.id},[i("a",{staticClass:"text-capitalize",attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.sortSubmissionsBy("criteria",e.id)}}},[t._v("\n                                        "+t._s(e.name)+"\n                                    ")])])})),t._v(" "),i("th",[i("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.sortSubmissionsBy("total")}}},[t._v("\n                                        Total\n                                    ")])]),t._v(" "),i("th",[i("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.sortSubmissionsBy("completed")}}},[t._v("\n                                        Completed\n                                    ")])])],2)]),t._v(" "),i("tbody",t._l(t.sortedSubmissions,(function(e){return i("tr",{key:e.id},[i("td",{staticClass:"text-left"},[t._v("\n                                    "+t._s(e.name)+"\n                                ")]),t._v(" "),t._l(t.criterias,(function(s){return i("td",{key:s.id,staticClass:"text-left"},[i("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#editing-judging-modal"},on:{click:function(i){return i.preventDefault(),t.selectForEditing(e.id,s.id)}}},[i("i",{staticClass:"mr-1 fas fa-edit"}),t._v(" "),"comments"!=s.name?i("span",[t._v("\n                                            "+t._s(t.getScore(e.id,s.id)+"/"+s.maxScore)+"\n                                        ")]):t._e()])])})),t._v(" "),i("td",[t._v("\n                                    "+t._s(t.getTotalScore(e.id))+"/"+t._s(t.maxPossibleScore)+"\n                                ")]),t._v(" "),i("td",{staticClass:"text-center"},[i("i",{staticClass:"fa",class:t.isCompleted(e.id)?"fa-check text-success":"fa-times text-danger"})])],2)})),0)])])])])]):t._e(),t._v(" "),i("editing-criteria-modal"),t._v(" "),i("toast-messages")],1)},n=[];s._withStripped=!0},hDfH:function(t,e,i){"use strict";var s=i("lRrF");i.n(s).a},lRrF:function(t,e,i){var s=i("rpex");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,i("SZ7m").default)("66ccea3a",s,!1,{})},qIrM:function(t,e,i){"use strict";$(document).ready((function(){$("body").tooltip({selector:"[data-toggle=tooltip]",trigger:"hover"})}))},rQUL:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return n}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{position:"fixed",bottom:"20px",left:"20px","z-index":"2000"}},t._l(t.toastMessages,(function(e,s){return i("div",{key:s,staticClass:"toast show"},[i("div",{staticClass:"toast-body",class:t.getToastTypeClass(e)},[t._v("\n            "+t._s(e.message)+"\n        ")])])})),0)},n=[];s._withStripped=!0},rpex:function(t,e,i){(t.exports=i("JPst")(!1)).push([t.i,"\n.card[data-v-2c099362] {\r\n    transform: none;\n}\r\n\r\n",""])},tfpH:function(t,e,i){"use strict";i.r(e);var s=i("afZf"),n=i("uSwF");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);var r=i("KHd+"),a=Object(r.a)(n.default,s.a,s.b,!1,null,null,null);a.options.__file="src/components/judging/EditingCriteriaModal.vue",e.default=a.exports},uSwF:function(t,e,i){"use strict";i.r(e);var s=i("7OI8"),n=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,(function(){return s[t]}))}(o);e.default=n.a},vCLK:function(t,e,i){"use strict";var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{d(s.next(t))}catch(t){o(t)}}function a(t){try{d(s.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}d((s=s.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=n(i("oCYn")),r=n(i("vDqi"));e.default=o.default.extend({methods:{executeGet(t,e){return s(this,void 0,void 0,(function*(){e&&(e.target.disabled=!0),$("[data-toggle='tooltip']").tooltip("hide");try{const i=yield r.default.get(t);return i.data.error?(this.$store.dispatch("updateToastMessages",{message:i.data.error}),{error:i.data.error}):i.data}catch(t){return this.$store.dispatch("updateToastMessages",{message:"Something went wrong!"}),{error:"Something went wrong!"}}finally{e&&(e.target.disabled=!1)}}))},executePost(t,e={},i){return s(this,void 0,void 0,(function*(){i&&(i.target.disabled=!0),$("[data-toggle='tooltip']").tooltip("hide");try{const s=yield r.default.post(t,e);return s.data.error?(this.$store.dispatch("updateToastMessages",{message:s.data.error}),{error:s.data.error}):s.data}catch(t){return this.$store.dispatch("updateToastMessages",{message:"Something went wrong!"}),{error:"Something went wrong!"}}finally{i&&(i.target.disabled=!1)}}))},isError:t=>void 0!==t.error,listUser:(t,e,i)=>t+(e<i-1?", ":"")}})}},[["Fsy3",0,1]]]);