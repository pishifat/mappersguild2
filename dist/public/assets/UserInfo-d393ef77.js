import{M as h}from"./ModalDialog-aa32fc15.js";import{C as m}from"./CopyPaste-92b15a82.js";import{d as g,_ as f,o as b,c as M,w as r,i as u,a as t,b as i,v as $,t as a,f as d,z as y,j as w,q as n}from"./index-fe01c0c0.js";const I=g({name:"UserInfo",components:{ModalDialog:h,CopyPaste:m},props:{user:{type:Object,default:null},currentGroup:{type:String,default:""}},data(){return{badge:0,queuedBadge:0,discordId:"",group:"",coins:"",pin:"",sweater:"",additionalItems:"",legacyPoints:0}},watch:{user(){this.badge=this.user.badge||0,this.queuedBadge=this.user.queuedBadge||0,this.discordId=this.user.discordId||"",this.group=this.user.group||"",this.legacyPoints=this.user.legacyPoints||0}},created(){this.user&&(this.badge=this.user.badge||0,this.queuedBadge=this.user.badge||0,this.discordId=this.user.discordId||"",this.group=this.user.group||"",this.legacyPoints=this.user.legacyPoints||0)},methods:{async updateGroup(e){const s=await this.$http.executePost(`/admin/users/${this.user.id}/updateGroup`,{group:this.group},e);s&&(this.$store.dispatch("updateToastMessages",{message:`set group to ${s}`,type:"info"}),this.$store.commit("updateGroup",{userId:this.user.id,group:s}))},async updateQueuedBadge(e){const s=await this.$http.executePost(`/admin/users/${this.user.id}/updateQueuedBadge`,{badge:this.queuedBadge},e);s&&(this.$store.dispatch("updateToastMessages",{message:`set queued badge to ${s}`,type:"info"}),this.$store.commit("updateQueuedBadge",{userId:this.user.id,badge:s}))},async updateBadge(e){const s=await this.$http.executePost(`/admin/users/${this.user.id}/updateBadge`,{badge:this.badge},e);s&&(this.$store.dispatch("updateToastMessages",{message:`set actual badge to ${s}`,type:"info"}),this.$store.commit("updateBadge",{userId:this.user.id,badge:s}))},async updateLegacyPoints(e){const s=await this.$http.executePost(`/admin/users/${this.user.id}/updateLegacyPoints`,{legacyPoints:this.legacyPoints},e);s&&(this.$store.dispatch("updateToastMessages",{message:`set legacy points to ${s}`,type:"info"}),this.$store.commit("updateLegacyPoints",{userId:this.user.id,legacyPoints:s}))},async updateDiscordId(e){const s=await this.$http.executePost(`/admin/users/${this.user.id}/updateDiscordId`,{discordId:this.discordId},e);s&&(this.$store.dispatch("updateToastMessages",{message:`set discord ID to ${s}`,type:"info"}),this.$store.commit("updateDiscordId",{userId:this.user.id,discordId:s}))},async calculateUserPoints(e){await this.$http.executePost(`/admin/users/${this.user.id}/calculateUserPoints`,{},e)&&this.$store.dispatch("updateToastMessages",{message:"calculated points",type:"info"})},async toggleIsMentorshipAdmin(e){const s=await this.$http.executePost(`/admin/users/${this.user.id}/toggleIsMentorshipAdmin`,{isMentorshipAdmin:!this.user.isMentorshipAdmin},e);s&&(this.$store.dispatch("updateToastMessages",{message:`set isMentorshipAdmin ${s.isMentorshipAdmin}`,type:"info"}),this.$store.commit("updateIsMentorshipAdmin",{userId:this.user.id,isMentorshipAdmin:s.isMentorshipAdmin}))},async toggleHasMerchAccess(e){const s=await this.$http.executePost(`/admin/users/${this.user.id}/toggleHasMerchAccess`,{hasMerchAccess:!this.user.hasMerchAccess},e);s&&(this.$store.dispatch("updateToastMessages",{message:`set hasMerchAccess ${s.hasMerchAccess}`,type:"info"}),this.$store.commit("updateHasMerchAccess",{userId:this.user.id,hasMerchAccess:s.hasMerchAccess}))},async toggleHasSpecificMerchOrder(e){const s=await this.$http.executePost(`/admin/users/${this.user.id}/toggleHasSpecificMerchOrder`,{hasSpecificMerchOrder:!this.user.hasSpecificMerchOrder},e);s&&(this.$store.dispatch("updateToastMessages",{message:`set hasSpecificMerchOrder ${s.hasSpecificMerchOrder}`,type:"info"}),this.$store.commit("updateHasSpecificMerchOrder",{userId:this.user.id,hasSpecificMerchOrder:s.hasSpecificMerchOrder}))}}}),P={class:"container"},v=t("h6",null," Groups/permissions ",-1),A={class:"row mb-2"},B=t("option",{value:"user"}," User ",-1),C=t("option",{value:"admin"}," Admin ",-1),S=t("option",{value:"locus"}," Locus admin ",-1),k=[B,C,S],U={class:"row mb-2"},O={class:"col-sm-4"},D=t("h6",{class:"mt-4"}," Rewards ",-1),T={class:"mb-2 small text-secondary"},q={class:"mb-2"},_={class:"row mb-2"},H={class:"row mb-2"},V={class:"row mb-2"},G=t("h6",{class:"mt-4"}," Merch ",-1),L={class:"row mb-2"},Q={class:"col-sm-4"},N={class:"col-sm-4"},j=t("h6",{class:"mt-4"}," Other ",-1),z={class:"row mb-2"},E={class:"ms-2 mb-2"},R=t("i",{class:"fas fa-angle-down"},null,-1),F={id:"debug",class:"collapse"};function J(e,s,K,W,X,Y){const c=n("user-link"),l=n("copy-paste"),p=n("modal-dialog");return b(),M(p,{id:`editUser${e.currentGroup}`,"header-class":e.user?"bg-rank-"+e.user.rank:"",loaded:!!e.user},{header:r(()=>[u(c,{user:e.user},null,8,["user"])]),default:r(()=>[t("div",P,[v,t("div",A,[i(t("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>e.group=o),class:"form-select form-select-sm w-50 mx-2"},k,512),[[$,e.group]]),t("button",{class:"btn btn-sm btn-outline-info w-25",onClick:s[1]||(s[1]=o=>e.updateGroup(o))}," Save group ")]),t("div",U,[t("div",O,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[2]||(s[2]=o=>e.toggleIsMentorshipAdmin(o))},a(e.user.isMentorshipAdmin?"Disable":"Enable")+" isMentorshipAdmin ",1)])]),D,t("div",T," Current points: "+a(e.user.totalPoints),1),t("div",q,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[3]||(s[3]=o=>e.calculateUserPoints(o))}," Calculate user points ")]),t("div",_,[i(t("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>e.queuedBadge=o),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off"},null,512),[[d,e.queuedBadge]]),t("button",{class:"btn btn-sm btn-outline-info w-25",onClick:s[5]||(s[5]=o=>e.updateQueuedBadge(o))}," Queue badge ")]),t("div",H,[i(t("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>e.badge=o),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off"},null,512),[[d,e.badge]]),t("button",{class:"btn btn-sm btn-outline-info w-25",onClick:s[7]||(s[7]=o=>e.updateBadge(o))}," Update actual badge ")]),t("div",V,[i(t("input",{"onUpdate:modelValue":s[8]||(s[8]=o=>e.legacyPoints=o),class:"form-control form-control-sm mx-2 w-50",type:"number",autocomplete:"off"},null,512),[[d,e.legacyPoints]]),t("button",{class:"btn btn-sm btn-outline-info w-25",onClick:s[9]||(s[9]=o=>e.updateLegacyPoints(o))}," Update legacy points ")]),G,t("div",L,[t("div",Q,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[10]||(s[10]=o=>e.toggleHasMerchAccess(o))}," hasMerchAccess: "+a(e.user.hasMerchAccess),1)]),t("div",N,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[11]||(s[11]=o=>e.toggleHasSpecificMerchOrder(o))}," hasSpecificMerchOrder: "+a(e.user.hasSpecificMerchOrder),1)])]),j,t("div",z,[i(t("input",{"onUpdate:modelValue":s[12]||(s[12]=o=>e.discordId=o),class:"form-control form-control-sm mx-2 w-50",type:"text",autocomplete:"off"},null,512),[[d,e.discordId]]),t("button",{class:"btn btn-sm btn-outline-info w-25",onClick:s[13]||(s[13]=o=>e.updateDiscordId(o))}," Save Discord ID ")]),t("div",E,[t("a",{href:"#debug","data-bs-toggle":"collapse",onClick:s[14]||(s[14]=y(()=>{},["prevent"]))},[w(" Debug "),R])]),t("div",F,[u(l,null,{default:r(()=>[t("pre",null,a(e.user),1)]),_:1})])])]),_:1},8,["id","header-class","loaded"])}const es=f(I,[["render",J]]);export{es as U};
