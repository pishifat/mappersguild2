import{d,_ as u,o,e as r,a as s,z as h,b as c,f as m,g as f,t as n,n as l,F as b,r as y,k as p}from"./index-c0588d7c.js";const k=d({name:"ArtistSearch",props:{input:{type:String,default:""}},data(){return{beatmapsets:[],searchText:this.input,searchedOnce:!1,isLoading:!1}},computed:{totalRankedPlays(){let t=0;for(const e of this.beatmapsets)e.ranked>0&&(t+=e.play_count);return t},totalUnrankedPlays(){let t=0;for(const e of this.beatmapsets)e.ranked<=0&&(t+=e.play_count);return t},totalPlays(){return this.totalRankedPlays+this.totalUnrankedPlays},totalRankedBeatmapsets(){let t=0;for(const e of this.beatmapsets)e.ranked>0&&t++;return t},totalUnrankedBeatmapsets(){let t=0;for(const e of this.beatmapsets)e.ranked<=0&&t++;return t},rankedMappers(){let t=[];for(const e of this.beatmapsets)e.ranked>0&&!t.includes(e.creator)&&t.push(e.creator);return t.length},unrankedMappers(){let t=[];for(const e of this.beatmapsets)e.ranked<=0&&!t.includes(e.creator)&&t.push(e.creator);return t.length},uniqueMappers(){let t=[];for(const e of this.beatmapsets)t.includes(e.creator)||t.push(e.creator);return t.length},sortedBeatmapsets(){return[...this.beatmapsets].sort((e,i)=>i.play_count-e.play_count)}},watch:{input(){this.searchText=this.input,this.searchArtist(null)}},methods:{async searchArtist(t){this.isLoading=!0,this.beatmapsets=[];const e=await this.$http.executeGet(`/admin/artistSearch/${this.searchText}`,t);this.isLoading=!1,this.searchedOnce=!0,this.beatmapsets=e.beatmapsets}}}),g={class:"container py-1"},_={class:"row my-2"},v={class:"col"},w={class:"input-group"},B=s("i",{class:"fas fa-search"},null,-1),L=[B],P={key:0},$=["href"],M=["href"],R={class:"row"},S={class:"col-sm"},q={class:"table table-sm"},U=s("thead",null,[s("tr",null,[s("th",null,"status"),s("th",null,"plays"),s("th",null,"maps"),s("th",null,"mappers")])],-1),A=s("td",null,"ranked",-1),N=s("td",null,"unranked",-1),T=s("td",null,"top 50 maps",-1),C={class:"row"},D={class:"col-sm"},O={class:"table table-sm"},V=s("thead",null,[s("tr",null,[s("th",null,"metadata"),s("th",null,"plays")])],-1),z=["href"],F={key:1},K={key:2};function E(t,e,i,G,j,H){return o(),r("div",g,[s("div",_,[s("div",v,[s("div",w,[s("button",{class:"btn btn-primary",href:"#",onClick:e[0]||(e[0]=h(a=>t.searchArtist(a),["prevent"]))},L),c(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>t.searchText=a),class:"form-control",type:"text",maxlength:"100",placeholder:"artist name...",autocomplete:"off",onKeyup:e[2]||(e[2]=f(a=>t.searchArtist(a),["enter"]))},null,544),[[m,t.searchText]])])])]),t.beatmapsets&&t.beatmapsets.length?(o(),r("div",P,[s("div",null,[s("a",{href:`https://osu.ppy.sh/beatmapsets?q=artist%3D%22${t.input}%22`,target:"_blank"},n(`https://osu.ppy.sh/beatmapsets?q=artist%3D%22${t.input}%22`),9,$)]),s("div",null,[s("a",{href:`https://www.google.com/search?q=%22${t.input}%22`,target:"_blank"},n(`https://www.google.com/search?q=%22${t.input}%22`),9,M)]),s("div",R,[s("div",S,[s("table",q,[U,s("tbody",null,[s("tr",null,[A,s("td",null,n(Number(t.totalRankedPlays).toLocaleString()),1),s("td",{class:l(t.totalRankedBeatmapsets>2?"bg-info":t.totalRankedBeatmapsets>0?"bg-primary":"")},n(t.totalRankedBeatmapsets),3),s("td",null,n(t.rankedMappers),1)]),s("tr",null,[N,s("td",null,n(Number(t.totalUnrankedPlays).toLocaleString()),1),s("td",null,n(t.totalUnrankedBeatmapsets),1),s("td",null,n(t.unrankedMappers),1)]),s("tr",null,[T,s("td",{class:l(t.totalPlays>1e5?"bg-info":t.totalPlays>1e4?"bg-primary":"")},n(Number(t.totalRankedPlays+t.totalUnrankedPlays).toLocaleString()),3),s("td",{class:l(t.beatmapsets.length>49?"bg-info":t.beatmapsets.length>20?"bg-primary":"")},n(t.totalRankedBeatmapsets+t.totalUnrankedBeatmapsets),3),s("td",{class:l(t.uniqueMappers>40?"bg-info":t.uniqueMappers>20?"bg-primary":"")},n(t.uniqueMappers),3)])])])])]),s("div",C,[s("div",D,[s("table",O,[V,s("tbody",null,[(o(!0),r(b,null,y(t.sortedBeatmapsets,a=>(o(),r("tr",{key:a.id,class:l(a.ranked>0?"bg-dark":"")},[s("td",null,[s("a",{href:`https://osu.ppy.sh/beatmapsets/${a.id}`,target:"_blank"},n(a.artist)+" - "+n(a.title),9,z)]),s("td",{class:l(a.play_count>1e4?"bg-info":a.play_count>1e3?"bg-primary":"")},n(Number(a.play_count).toLocaleString()),3)],2))),128))])])])])])):t.searchedOnce&&!t.isLoading?(o(),r("div",F," no results ")):p("",!0),t.isLoading?(o(),r("div",K," Loading... ")):p("",!0)])}const J=u(k,[["render",E]]);export{J as A};
