import{d as U,m as b,_ as $,o as l,e as c,a as n,j as M,t as w,z as C,i as d,w as _,b as m,n as i,k as f,q as h,s as S,A as B,f as v,g as D}from"./index-d238b61e.js";import{U as E}from"./UserInfo-ffd7f231.js";import{D as y}from"./DataTable-4830036a.js";import{U as p}from"./user-a97d0bc7.js";const L=U({components:{DataTable:y,UserInfo:E},props:{groupedUsers:{type:Array,default:()=>[]},group:{type:String,required:!0}},data(){return{selectedUserId:""}},computed:{...b({users:s=>s.usersAdmin.users}),selectedUser(){return this.users.find(s=>s.id===this.selectedUserId)}}}),q=["href"],G=n("i",{class:"fas fa-angle-down"},null,-1);function N(s,e,r,t,I,A){const a=h("user-link"),u=h("data-table"),k=h("user-info"),g=S("bs-tooltip");return l(),c("div",null,[n("a",{href:`#${s.group}`,"data-bs-toggle":"collapse",class:"ms-1",onClick:e[0]||(e[0]=C(()=>{},["prevent"]))},[n("h6",null,[M(w(s.group)+" ",1),G])],8,q),d(u,{id:s.group,class:i(s.groupedUsers.length>30?"collapse":"show"),data:s.groupedUsers,headers:["USERNAME","RANK","QUEUED BADGE","BADGE"],"custom-data-target":`#editUser${s.group}`,"onUpdate:selectedId":e[1]||(e[1]=o=>s.selectedUserId=o)},{default:_(({obj:o})=>[n("td",null,[d(a,{user:o},null,8,["user"])]),n("td",null,[o.rank?m((l(),c("i",{key:0,class:i(["fas fa-crown","text-rank-"+o.rank])},null,2)),[[g,`rank ${o.rank} user`]]):f("",!0)]),n("td",{class:i({"bg-open":o.rank!=o.queuedBadge})},[o.queuedBadge?m((l(),c("i",{key:0,class:i(["fas fa-crown","text-rank-"+o.queuedBadge])},null,2)),[[g,`rank ${o.queuedBadge} user`]]):f("",!0)],2),n("td",{class:i({"bg-open":o.rank!=o.badge})},[o.badge?m((l(),c("i",{key:0,class:i(["fas fa-crown","text-rank-"+o.badge])},null,2)),[[g,`rank ${o.badge} user`]]):f("",!0)],2)]),_:1},8,["id","class","data","custom-data-target"]),d(k,{user:s.selectedUser,"current-group":s.group},null,8,["user","current-group"])])}const H=$(L,[["render",N]]),V={state:{users:[]},mutations:{setUsers(s,e){s.users=e},updateBadge(s,e){const r=s.users.find(t=>t.id==e.userId);r&&(r.queuedBadge=e.badge)},updateLegacyPoints(s,e){const r=s.users.find(t=>t.id==e.userId);r&&(r.legacyPoints=e.legacyPoints)},updateDiscordId(s,e){const r=s.users.find(t=>t.id==e.userId);r&&(r.discordId=e.discordId)},updateIsShowcaseMapper(s,e){const r=s.users.find(t=>t.id==e.userId);r&&(r.isShowcaseMapper=e.isShowcaseMapper)},updateIsMentorshipAdmin(s,e){const r=s.users.find(t=>t.id==e.userId);r&&(r.isMentorshipAdmin=e.isMentorshipAdmin)},updateIsWorldCupHelper(s,e){const r=s.users.find(t=>t.id==e.userId);r&&(r.isWorldCupHelper=e.isWorldCupHelper)},updateHasMerchAccess(s,e){const r=s.users.find(t=>t.id==e.userId);r&&(r.hasMerchAccess=e.hasMerchAccess)},updateHasSpecificMerchOrder(s,e){const r=s.users.find(t=>t.id==e.userId);r&&(r.hasSpecificMerchOrder=e.hasSpecificMerchOrder)},updateWorldCupMerch(s,e){const r=s.users.find(t=>t.id==e.userId);r&&(r.worldCupMerch=e.worldCupMerch)}},getters:{normalUsers:s=>s.users.filter(e=>e.group==p.User),showcaseUsers:s=>s.users.filter(e=>e.group==p.Secret),adminUsers:s=>s.users.filter(e=>e.group==p.Admin),locusUsers:s=>s.users.filter(e=>e.group==p.Locus)}},T=V,W=U({name:"LoadUsers",components:{AdminUserTable:H},data(){return{selectedUserId:"",userInput:""}},computed:{...b({users:s=>s.usersAdmin.users}),...B(["normalUsers","showcaseUsers","adminUsers","locusUsers"])},beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",T)},unmounted(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},methods:{async loadAllUsers(s){const e=await this.$http.executeGet("/admin/users/load",s);this.$http.isError(e)||this.$store.commit("setUsers",e)},async searchUser(s){const e=await this.$http.executeGet(`/admin/users/searchUser/${this.userInput}`,s);this.$http.isError(e)||this.$store.commit("setUsers",[e])}}}),K={class:"container card card-body"},O=n("h4",null," Load users ",-1),P=n("h5",{class:"mt-2"}," Single user ",-1),j=n("h5",{class:"mt-2"}," All users ",-1),z={key:0};function R(s,e,r,t,I,A){const a=h("admin-user-table");return l(),c("div",K,[O,P,m(n("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>s.userInput=u),class:"form-control form-control-sm mb-2",type:"text",maxlength:"18",autocomplete:"off",placeholder:"enter to search...",onKeyup:e[1]||(e[1]=D(u=>s.searchUser(u),["enter"]))},null,544),[[v,s.userInput]]),n("button",{class:"btn btn-sm w-100 btn-info mb-2",onClick:e[2]||(e[2]=u=>s.searchUser(u))}," Load user "),j,n("button",{class:"btn btn-sm w-100 btn-info",onClick:e[3]||(e[3]=u=>s.loadAllUsers(u))}," Load all users "),s.users&&s.users.length?(l(),c("div",z,[d(a,{"grouped-users":s.adminUsers,group:"admin"},null,8,["grouped-users"]),d(a,{"grouped-users":s.showcaseUsers,group:"secret"},null,8,["grouped-users"]),d(a,{"grouped-users":s.normalUsers,group:"user"},null,8,["grouped-users"]),d(a,{"grouped-users":s.locusUsers,group:"locus"},null,8,["grouped-users"])])):f("",!0)])}const Y=$(W,[["render",R]]);export{Y as L};
