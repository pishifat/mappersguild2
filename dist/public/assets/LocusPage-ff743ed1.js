import{d as b,m,y as O,_ as y,o as i,e as n,i as w,a as o,F as g,r as I,n as _,z as U,t as u,q as k,k as d,j as a,u as C,x as R,b as r,v as L,f as h,A as z}from"./index-9fdf6c8f.js";import{F as E}from"./FilterBox-6cc216ef.js";import{U as T}from"./user-a97d0bc7.js";const S={namespaced:!0,state:{filterValue:"",locusInfos:[],selfLocusInfo:null},mutations:{setFilterValue(s,e){s.filterValue=e},setLocusInfos(s,e){s.locusInfos=e},setSelfLocusInfo(s,e){s.selfLocusInfo=e},setRoleIs(s,e){s.roleIs=e},updateTimezone(s,e){s.selfLocusInfo.timezone=e,this.commit("locus/updateSelfInListing")},updateAvailability(s,e){s.selfLocusInfo.availability=e,this.commit("locus/updateSelfInListing")},updateLanguage(s,e){if(s.selfLocusInfo.languages&&s.selfLocusInfo.languages.length){const l=s.selfLocusInfo.languages.findIndex(c=>c==e);l>-1?s.selfLocusInfo.languages.splice(l,1):s.selfLocusInfo.languages.push(e)}else s.selfLocusInfo.languages=[e];this.commit("locus/updateSelfInListing")},updateRole(s,e){if(s.selfLocusInfo.roles&&s.selfLocusInfo.roles.length){const l=s.selfLocusInfo.roles.findIndex(c=>c==e);l>-1?s.selfLocusInfo.roles.splice(l,1):s.selfLocusInfo.roles.push(e)}else s.selfLocusInfo.roles=[e];this.commit("locus/updateSelfInListing")},updateDiscord(s,e){s.selfLocusInfo.discord=e,this.commit("locus/updateSelfInListing")},updateEmail(s,e){s.selfLocusInfo.email=e,this.commit("locus/updateSelfInListing")},updateAbout(s,e){s.selfLocusInfo.about=e,this.commit("locus/updateSelfInListing")},updateIsPublic(s,e){s.selfLocusInfo.isPublic=e,this.commit("locus/updateSelfInListing")},updateIsOnTeam(s,e){s.selfLocusInfo.isOnTeam=e,this.commit("locus/updateSelfInListing")},adminUpdateIsOnTeam(s,e){const l=s.locusInfos.findIndex(c=>c.id==e.id);s.locusInfos[l].isOnTeam=e.isOnTeam},updateSelfInListing(s){const e=s.locusInfos.findIndex(l=>l.id==s.selfLocusInfo.id);s.locusInfos[e]=s.selfLocusInfo}},getters:{filteredLocusInfos:s=>{let e=s.locusInfos;return s.filterValue.length&&(e=e.filter(l=>{let c;return l.user.username.toLowerCase().includes(s.filterValue.toLowerCase())&&(c=!0),l.user.osuId.toString().includes(s.filterValue)&&(c=!0),l.languages.includes(s.filterValue.toLowerCase())&&(c=!0),c})),s.roleIs&&s.roleIs!=="any"&&(e=e.filter(l=>l.roles.includes(s.roleIs))),e}},actions:{updateFilterValue({commit:s},e){s("setFilterValue",e)},updateRole({commit:s,state:e},l){l=="designer"&&(l="visual designer"),e.roleIs!==l&&s("setRoleIs",l)}}},V=S,M=b({name:"LocusPageFilters",components:{FilterBox:E},data(){return{roleOptions:{any:"Any",designer:"Visual designer",mapper:"Mapper",musician:"Musician"}}},computed:m("locus",["roleIs"]),methods:O("locus",["updateFilterValue","updateRole"])}),P={class:"container card card-body py-3 mb-2"},D={class:"row small mt-3"},F=o("div",{class:"col-auto filter-title"}," Role ",-1),N={class:"col"},j=["onClick"];function Y(s,e,l,c,v,$){const f=k("filter-box");return i(),n("div",P,[w(f,{placeholder:"search username...","onUpdate:filterValue":e[0]||(e[0]=t=>s.updateFilterValue(t))}),o("div",D,[F,o("div",N,[(i(!0),n(g,null,I(s.roleOptions,(t,p)=>(i(),n("a",{key:p,class:_(s.roleIs===p||s.roleIs=="visual designer"&&p=="designer"?"sorted":"unsorted"),href:"#",onClick:U(Oe=>s.updateRole(p),["prevent"])},u(t),11,j))),128))])])])}const q=y(M,[["render",Y]]),B=b({name:"LocusCard",props:{locusInfo:{type:Object,required:!0}},computed:{...m(["loggedInUser"]),isAdmin(){return this.loggedInUser.group==T.Admin||this.loggedInUser.group==T.Locus}},methods:{async adminToggleIsOnTeam(s){const e=await this.$http.executePost(`/locus/${this.locusInfo.id}/toggleIsOnTeam`,{},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated team status",type:"info"}),this.$store.commit("locus/adminUpdateIsOnTeam",{isOnTeam:e,id:this.locusInfo.id}))}}});const H=s=>(C("data-v-69cc27f1"),s=s(),R(),s),G={key:1,class:"on-team-text fs-1 pointer-events-none"},W=["src"],J={class:"ms-3 mt-1 mb-1"},K={class:"ms-3"},Q={key:0,class:"ms-2 text-secondary text-capitalize"},X={key:1,class:"ms-2 text-secondary"},Z={key:0,class:"mb-3"},x={key:1,class:"small"},ss={key:0},es={class:"text-secondary"},os={key:1},ts={class:"text-secondary"},is={key:2,class:"ms-2"},ns={class:"text-secondary"},ls={key:2,class:"small"},as={class:"text-secondary"},us=H(()=>o("a",{href:"https://www.timeanddate.com/time/map/#!cities=1440",target:"_blank"},"UTC",-1)),ds={key:3,class:"small"},cs={class:"text-secondary"},rs={key:4,class:"small"},ms={class:"text-secondary text-capitalize"},fs={key:5},ps={key:6,class:"small"},hs=["innerHTML"];function gs(s,e,l,c,v,$){const f=k("user-link");return s.locusInfo?(i(),n("div",{key:0,class:_(["position-relative",s.locusInfo.isOnTeam?"on-team opacity-50":""])},[s.isAdmin?(i(),n("button",{key:0,class:"btn btn-sm btn-outline-danger top-right-button",onClick:e[0]||(e[0]=t=>s.adminToggleIsOnTeam(t))},u(s.locusInfo.isOnTeam?'Mark as "not on a team"':'Mark as "on a team"'),1)):d("",!0),s.locusInfo.isOnTeam?(i(),n("div",G," Joined a team ")):d("",!0),o("div",{class:_(["card card-level-2 card-body my-2",s.locusInfo.isOnTeam?"pointer-events-none":""])},[o("img",{src:"https://a.ppy.sh/"+s.locusInfo.user.osuId,class:"card-avatar-img"},null,8,W),o("div",J,[w(f,{class:"ms-2",user:s.locusInfo.user},null,8,["user"])]),o("div",K,[s.locusInfo.roles&&s.locusInfo.roles.length?(i(),n("i",Q,u(s.locusInfo.roles.join(", ")),1)):(i(),n("i",X,"No roles selected"))]),s.locusInfo.timezone||s.locusInfo.availability||s.locusInfo.languages&&s.locusInfo.languages.length||s.locusInfo.discord?(i(),n("hr",Z)):d("",!0),s.locusInfo.discord||s.locusInfo.email?(i(),n("div",x,[s.locusInfo.discord&&s.locusInfo.discord.length&&s.locusInfo.email&&s.locusInfo.email.length?(i(),n("div",ss,[a(" Discord: "),o("span",es,[o("i",null,u(s.locusInfo.discord?s.locusInfo.discord:"Discord ID")+" ("+u(s.locusInfo.email)+")",1)])])):s.locusInfo.discord&&s.locusInfo.discord.length?(i(),n("div",os,[a(" Discord: "),o("span",ts,[o("i",null,u(s.locusInfo.discord?s.locusInfo.discord:"Discord ID"),1)])])):!s.locusInfo.discord&&!s.locusInfo.discord.length&&s.locusInfo.email&&s.locusInfo.email.length?(i(),n("div",is,[a(" Email: "),o("span",ns,[o("i",null,u(s.locusInfo.email),1)])])):d("",!0)])):d("",!0),s.locusInfo.timezone?(i(),n("div",ls,[a(" Timezone: "),o("i",as,[a(u(s.locusInfo.timezone)+" ",1),us])])):d("",!0),s.locusInfo.availability?(i(),n("div",ds,[a(" Availability: "),o("i",cs,u(s.locusInfo.availability),1)])):d("",!0),s.locusInfo.languages&&s.locusInfo.languages.length?(i(),n("div",rs,[a(" Languages: "),o("i",ms,"English, "+u(s.locusInfo.languages.join(", ")),1)])):d("",!0),s.locusInfo.about?(i(),n("hr",fs)):d("",!0),s.locusInfo.about?(i(),n("div",ps,[o("span",{class:"text-secondary",innerHTML:s.$md.render(s.locusInfo.about.trim())},null,8,hs)])):d("",!0)],2)],2)):d("",!0)}const A=y(B,[["render",gs],["__scopeId","data-v-69cc27f1"]]),Is=b({name:"SelfLocusInfo",components:{LocusCard:A},data(){return{timezoneOptions:["-11","-10","-9","-8","-7","-6","-5","-4","-3:30","-3","-2","-1","+0","+1","+2","+3","+4","+5","+6","+7","+8","+9","+10","+11","+12"],languageOptions:["afrikaans","arabic","belarusian","cantonese","catalan","chinese","danish","dutch","filipino","finnish","french","galician","german","indonesian","italian","japanese","korean","lithuanian","malay","polish","portuguese","romanian","russian","serbian","spanish","swedish","thai","turkish","urdu","vietnamese"],roleOptions:["visual designer","mapper","musician"],newTimezone:"",newAvailability:"",newLanguage:"",newRole:"",newDiscord:"",newEmail:"",newAbout:""}},computed:{...m(["loggedInUser"]),...m("locus",["selfLocusInfo"]),userLanguages(){return this.selfLocusInfo&&this.selfLocusInfo.languages&&this.selfLocusInfo.languages.length?this.selfLocusInfo.languages:[]},userRoles(){return this.selfLocusInfo&&this.selfLocusInfo.roles&&this.selfLocusInfo.roles.length?this.selfLocusInfo.roles:[]}},watch:{selfLocusInfo(){this.newTimezone=this.selfLocusInfo.timezone,this.newAvailability=this.selfLocusInfo.availability,this.newDiscord=this.selfLocusInfo.discord,this.newEmail=this.selfLocusInfo.email,this.newAbout=this.selfLocusInfo.about}},methods:{async updateTimezone(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateTimezone`,{timezone:this.newTimezone},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated timezone",type:"info"}),this.$store.commit("locus/updateTimezone",e))},async updateAvailability(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateAvailability`,{availability:this.newAvailability},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated availability",type:"info"}),this.$store.commit("locus/updateAvailability",e))},async updateLanguage(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateLanguage`,{language:this.newLanguage},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated language",type:"info"}),this.$store.commit("locus/updateLanguage",e))},async updateRole(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateRole`,{role:this.newRole},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated role",type:"info"}),this.$store.commit("locus/updateRole",e))},async updateDiscord(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateDiscord`,{discord:this.newDiscord},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated discord",type:"info"}),this.$store.commit("locus/updateDiscord",e))},async updateEmail(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateEmail`,{email:this.newEmail},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated email",type:"info"}),this.$store.commit("locus/updateEmail",e))},async updateAbout(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/updateAbout`,{about:this.newAbout},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated about",type:"info"}),this.$store.commit("locus/updateAbout",e))},async toggleIsPublic(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/toggleIsPublic`,{},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated public display",type:"info"}),this.$store.commit("locus/updateIsPublic",e))},async toggleIsOnTeam(s){const e=await this.$http.executePost(`/locus/${this.selfLocusInfo.id}/toggleIsOnTeam`,{},s);this.$http.isError(e)||(this.$store.dispatch("updateToastMessages",{message:"Updated team status",type:"info"}),this.$store.commit("locus/updateIsOnTeam",e))}}}),bs={class:"row"},ys={class:"col-sm-6"},vs={class:"mb-2"},$s={class:"small"},Ls={class:"small text-secondary mb-1"},_s={class:"mb-2"},ws={class:"small"},ks={class:"small text-secondary mb-1"},Ts={class:"mb-2"},As={class:"small"},Os=o("div",{class:"small text-secondary"},' What roles best describe you? Feel free to elaborate in "about" section ',-1),Us={class:"input-group"},Cs=o("option",{value:"",selected:"",disabled:""}," Select a role ",-1),Rs=["value"],zs={class:"input-group-append"},Es=["disabled"],Ss=o("i",{class:"fas fa-plus"},null,-1),Vs=[Ss],Ms={class:"input-group-append"},Ps=["disabled"],Ds=o("i",{class:"fas fa-minus"},null,-1),Fs=[Ds],Ns=o("hr",null,null,-1),js={class:"mb-2"},Ys={class:"small"},qs=o("div",{class:"small text-secondary"}," Your Discord ID (if you want to communicate through Discord) ",-1),Bs={class:"mb-2"},Hs={class:"small"},Gs=o("div",{class:"small text-secondary"}," Your email (if you want to communicate through email) ",-1),Ws={class:"mb-2"},Js={class:"small"},Ks=o("div",{class:"small text-secondary"},[a(" Relative to "),o("a",{href:"https://www.timeanddate.com/time/map/#!cities=1440",target:"_blank"},"UTC")],-1),Qs=o("option",{value:"",selected:"",disabled:""}," Select a timezone ",-1),Xs=["value"],Zs={class:"mb-2"},xs={class:"small"},se=o("div",{class:"small text-secondary"}," When you're usually available ",-1),ee={class:"mb-2"},oe={class:"small"},te=o("div",{class:"small text-secondary"}," Any languages you're comfortable communicating with (excluding English) ",-1),ie={class:"input-group"},ne=o("option",{value:"",selected:"",disabled:""}," Select a language ",-1),le=["value"],ae={class:"input-group-append"},ue=["disabled"],de=o("i",{class:"fas fa-plus"},null,-1),ce=[de],re={class:"input-group-append"},me=["disabled"],fe=o("i",{class:"fas fa-minus"},null,-1),pe=[fe],he=o("hr",null,null,-1),ge={class:"mb-2"},Ie={class:"small"},be=o("div",{class:"small text-secondary"},[a(" Any info you'd like people to know about you, such as your preferred genres, mapping experience, or other relevant skills. This section also supports "),o("a",{href:"https://www.markdownguide.org/cheat-sheet/",target:"_blank"},"markdown"),a("! ")],-1),ye={key:0,class:"col-sm-6"},ve={class:"text-danger small mt-3"},$e=o("hr",null,null,-1);function Le(s,e,l,c,v,$){const f=k("locus-card");return i(),n("div",null,[o("div",null,[o("div",null,[o("div",bs,[o("div",ys,[o("div",vs,[o("div",$s,[a(" Visibility "),o("div",Ls,[a(" Toggle this for public display. Your listing is currently "),o("i",null,u(s.selfLocusInfo.isPublic?"visible":"not visible"),1),a("! ")]),o("button",{class:"btn btn-sm btn-outline-info mb-2 w-100",onClick:e[0]||(e[0]=t=>s.toggleIsPublic(t))},u(s.selfLocusInfo.isPublic?"Hide from public listing":"Show on public listing"),1)])]),o("div",_s,[o("div",ws,[a(" Team status "),o("div",ks,[a(" Toggle this to show if you're already on a team. You are currently marked as "),o("i",null,u(s.selfLocusInfo.isOnTeam?"on a team":"not on a team"),1),a("! ")]),o("button",{class:"btn btn-sm btn-outline-info mb-2 w-100",onClick:e[1]||(e[1]=t=>s.toggleIsOnTeam(t))},u(s.selfLocusInfo.isOnTeam?'Mark as "not on a team"':'Mark as "on a team"'),1)])]),o("div",Ts,[o("div",As,[a(" Roles "),Os,o("div",Us,[r(o("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.newRole=t),class:"form-control form-control-sm ml-2"},[Cs,(i(!0),n(g,null,I(s.roleOptions,t=>(i(),n("option",{key:t,value:t,class:"text-capitalize"},u(t),9,Rs))),128))],512),[[L,s.newRole]]),o("div",zs,[s.userRoles.includes(s.newRole)?d("",!0):(i(),n("button",{key:0,disabled:s.userRoles.includes(s.newRole),class:"btn btn-sm btn-outline-success",type:"button",onClick:e[3]||(e[3]=t=>s.updateRole(t))},Vs,8,Es))]),o("div",Ms,[s.userRoles.includes(s.newRole)?(i(),n("button",{key:0,disabled:!s.userRoles.includes(s.newRole),class:"btn btn-sm btn-outline-danger",type:"button",onClick:e[4]||(e[4]=t=>s.updateRole(t))},Fs,8,Ps)):d("",!0)])])])]),Ns,o("div",js,[o("div",Ys,[a(" Discord "),qs,r(o("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>s.newDiscord=t),class:"ml-1 form-control form-control-sm w-100",placeholder:"discord...",maxlength:"40",onChange:e[6]||(e[6]=t=>s.updateDiscord(t))},null,544),[[h,s.newDiscord]])])]),o("div",Bs,[o("div",Hs,[a(" Email "),Gs,r(o("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>s.newEmail=t),class:"ml-1 form-control form-control-sm w-100",placeholder:"email...",maxlength:"100",onChange:e[8]||(e[8]=t=>s.updateEmail(t))},null,544),[[h,s.newEmail]])])]),o("div",Ws,[o("div",Js,[a(" Timezone "),Ks,r(o("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>s.newTimezone=t),class:"form-select form-select-sm w-100 d-inline",onChange:e[10]||(e[10]=t=>s.updateTimezone(t))},[Qs,(i(!0),n(g,null,I(s.timezoneOptions,t=>(i(),n("option",{key:t,value:t},u(t)+" UTC ",9,Xs))),128))],544),[[L,s.newTimezone]])])]),o("div",Zs,[o("div",xs,[a(" Availability "),se,r(o("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>s.newAvailability=t),class:"ml-1 form-control form-control-sm w-100",placeholder:"availability...",maxlength:"400",onChange:e[12]||(e[12]=t=>s.updateAvailability(t))},null,544),[[h,s.newAvailability]])])]),o("div",ee,[o("div",oe,[a(" Languages "),te,o("div",ie,[r(o("select",{"onUpdate:modelValue":e[13]||(e[13]=t=>s.newLanguage=t),class:"form-control form-control-sm ml-2"},[ne,(i(!0),n(g,null,I(s.languageOptions,t=>(i(),n("option",{key:t,value:t,class:"text-capitalize"},u(t),9,le))),128))],512),[[L,s.newLanguage]]),o("div",ae,[s.userLanguages.includes(s.newLanguage)?d("",!0):(i(),n("button",{key:0,disabled:s.userLanguages.includes(s.newLanguage),class:"btn btn-sm btn-outline-success",type:"button",onClick:e[14]||(e[14]=t=>s.updateLanguage(t))},ce,8,ue))]),o("div",re,[s.userLanguages.includes(s.newLanguage)?(i(),n("button",{key:0,disabled:!s.userLanguages.includes(s.newLanguage),class:"btn btn-sm btn-outline-danger",type:"button",onClick:e[15]||(e[15]=t=>s.updateLanguage(t))},pe,8,me)):d("",!0)])])])]),he,o("div",ge,[o("div",Ie,[a(" About "),be,r(o("textarea",{"onUpdate:modelValue":e[16]||(e[16]=t=>s.newAbout=t),length:"4",class:"ml-1 form-control form-control-sm",placeholder:"about...",maxlength:"40000",rows:"4",onChange:e[17]||(e[17]=t=>s.updateAbout(t))},null,544),[[h,s.newAbout]])])])]),s.selfLocusInfo?(i(),n("div",ye,[w(f,{"locus-info":s.selfLocusInfo},null,8,["locus-info"]),o("div",ve,u(s.selfLocusInfo.isPublic?"":"Your info is currently hidden from public display."),1)])):d("",!0)])])]),$e])}const _e=y(Is,[["render",Le]]),we=b({name:"LocusPage",components:{LocusPageFilters:q,SelfLocusInfo:_e,LocusCard:A},data(){return{userInput:null}},computed:{...m(["loggedInUser"]),...m("locus",["selfLocusInfo"]),...z("locus",["filteredLocusInfos"])},beforeCreate(){this.$store.hasModule("locus")||this.$store.registerModule("locus",V)},async created(){const s=await this.$http.initialRequest("/locus/query");this.$http.isError(s)||(this.$store.commit("locus/setLocusInfos",s.locusInfos),this.$store.commit("locus/setSelfLocusInfo",s.selfLocusInfo))},methods:{}}),ke=o("div",{class:"container card card-body py-4 my-4"},[o("h3",{class:"text-center"},[o("a",{href:"https://osu.ppy.sh/home/news/2025-01-31-locus",target:"_blank"},"Locus"),a("'s Nexus is closed for the year! Check back again in 2026 :) ")])],-1),Te=[ke];function Ae(s,e,l,c,v,$){return i(),n("div",null,Te)}const ze=y(we,[["render",Ae]]);export{ze as default};
