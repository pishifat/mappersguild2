import{d as U,m as b,_ as $,o as d,e as i,a as n,j as M,t as _,z as w,i as l,w as y,b as p,n as a,k as m,q as f,s as B,D as v,f as D,g as C}from"./index-fe01c0c0.js";import{U as E}from"./UserInfo-d393ef77.js";import{D as L}from"./DataTable-78440ecf.js";import{U as h}from"./user-9562c796.js";const S=U({components:{DataTable:L,UserInfo:E},props:{groupedUsers:{type:Array,default:()=>[]},group:{type:String,required:!0}},data(){return{selectedUserId:""}},computed:{...b({users:s=>s.usersAdmin.users}),selectedUser(){return this.users.find(s=>s.id===this.selectedUserId)}}}),q=["href"],G=n("i",{class:"fas fa-angle-down"},null,-1);function N(s,e,r,o,k,A){const c=f("user-link"),u=f("data-table"),I=f("user-info"),g=B("bs-tooltip");return d(),i("div",null,[n("a",{href:`#${s.group}`,"data-bs-toggle":"collapse",class:"ms-1",onClick:e[0]||(e[0]=w(()=>{},["prevent"]))},[n("h6",null,[M(_(s.group)+" ",1),G])],8,q),l(u,{id:s.group,class:a(s.groupedUsers.length>30?"collapse":"show"),data:s.groupedUsers,headers:["USERNAME","RANK","QUEUED BADGE","BADGE"],"custom-data-target":`#editUser${s.group}`,"onUpdate:selectedId":e[1]||(e[1]=t=>s.selectedUserId=t)},{default:y(({obj:t})=>[n("td",null,[l(c,{user:t},null,8,["user"])]),n("td",null,[t.rank?p((d(),i("i",{key:0,class:a(["fas fa-crown","text-rank-"+t.rank])},null,2)),[[g,`rank ${t.rank} user`]]):m("",!0)]),n("td",{class:a({"bg-open":t.rank!=t.queuedBadge})},[t.queuedBadge?p((d(),i("i",{key:0,class:a(["fas fa-crown","text-rank-"+t.queuedBadge])},null,2)),[[g,`rank ${t.queuedBadge} user`]]):m("",!0)],2),n("td",{class:a({"bg-open":t.rank!=t.badge})},[t.badge?p((d(),i("i",{key:0,class:a(["fas fa-crown","text-rank-"+t.badge])},null,2)),[[g,`rank ${t.badge} user`]]):m("",!0)],2)]),_:1},8,["id","class","data","custom-data-target"]),l(I,{user:s.selectedUser,"current-group":s.group},null,8,["user","current-group"])])}const V=$(S,[["render",N]]),T={state:{users:[]},mutations:{setUsers(s,e){s.users=e},updateBadge(s,e){const r=s.users.find(o=>o.id==e.userId);r&&(r.queuedBadge=e.badge)},updateLegacyPoints(s,e){const r=s.users.find(o=>o.id==e.userId);r&&(r.legacyPoints=e.legacyPoints)},updateDiscordId(s,e){const r=s.users.find(o=>o.id==e.userId);r&&(r.discordId=e.discordId)},updateIsMentorshipAdmin(s,e){const r=s.users.find(o=>o.id==e.userId);r&&(r.isMentorshipAdmin=e.isMentorshipAdmin)},updateHasMerchAccess(s,e){const r=s.users.find(o=>o.id==e.userId);r&&(r.hasMerchAccess=e.hasMerchAccess)},updateHasSpecificMerchOrder(s,e){const r=s.users.find(o=>o.id==e.userId);r&&(r.hasSpecificMerchOrder=e.hasSpecificMerchOrder)}},getters:{normalUsers:s=>s.users.filter(e=>e.group==h.User),adminUsers:s=>s.users.filter(e=>e.group==h.Admin),locusUsers:s=>s.users.filter(e=>e.group==h.Locus)}},K=T,O=U({name:"LoadUsers",components:{AdminUserTable:V},data(){return{selectedUserId:"",userInput:""}},computed:{...b({users:s=>s.usersAdmin.users}),...v(["normalUsers","adminUsers","locusUsers"])},beforeCreate(){this.$store.hasModule("usersAdmin")||this.$store.registerModule("usersAdmin",K)},unmounted(){this.$store.hasModule("usersAdmin")&&this.$store.unregisterModule("usersAdmin")},methods:{async loadAllUsers(s){const e=await this.$http.executeGet("/admin/users/load",s);this.$http.isError(e)||this.$store.commit("setUsers",e)},async searchUser(s){const e=await this.$http.executeGet(`/admin/users/searchUser/${this.userInput}`,s);this.$http.isError(e)||this.$store.commit("setUsers",[e])}}}),P={class:"container card card-body"},j=n("h4",null," Load users ",-1),z=n("h5",{class:"mt-2"}," Single user ",-1),H=n("h5",{class:"mt-2"}," All users ",-1),R={key:0};function Q(s,e,r,o,k,A){const c=f("admin-user-table");return d(),i("div",P,[j,z,p(n("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>s.userInput=u),class:"form-control form-control-sm mb-2",type:"text",maxlength:"18",autocomplete:"off",placeholder:"enter to search...",onKeyup:e[1]||(e[1]=C(u=>s.searchUser(u),["enter"]))},null,544),[[D,s.userInput]]),n("button",{class:"btn btn-sm w-100 btn-info mb-2",onClick:e[2]||(e[2]=u=>s.searchUser(u))}," Load user "),H,n("button",{class:"btn btn-sm w-100 btn-info",onClick:e[3]||(e[3]=u=>s.loadAllUsers(u))}," Load all users "),s.users&&s.users.length?(d(),i("div",R,[l(c,{"grouped-users":s.adminUsers,group:"admin"},null,8,["grouped-users"]),l(c,{"grouped-users":s.normalUsers,group:"user"},null,8,["grouped-users"]),l(c,{"grouped-users":s.locusUsers,group:"locus"},null,8,["grouped-users"])])):m("",!0)])}const Y=$(O,[["render",Q]]);export{Y as L};
