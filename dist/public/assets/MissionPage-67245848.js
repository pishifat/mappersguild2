import{d as T,V as O,m as L,_ as V,o as l,c as I,w as A,a as t,i as r,e as u,r as v,t as d,F as $,k,j as m,z as R,q as M,b as h,f,O as E,S as j,v as P,n as y,N as G,T as B,u as F,x as z}from"./index-eb7dce52.js";import{M as q}from"./ModalDialog-de16b702.js";import{b as N,F as W,c as Q}from"./FormTextarea-09ea5c6e.js";import{D as K}from"./DataTable-ec645634.js";import{C as H}from"./CopyPaste-52617df9.js";const Y=T({name:"SubmitMissionModal",components:{ModalDialog:q,FormInput:N,FormSelect:W,FormTextarea:Q},props:{isAdmin:Boolean},data(){return{modes:O,featuredArtists:[],selectedArtists:[],selectedArtistId:"",selectedDifficulties:[],selectedDifficulty:"",selectedMode:"",selectedModes:[],tier:"",deadline:"",objective:"",name:"",winCondition:"",isShowcaseMission:0,isArtistShowcase:0,userMaximumRankedBeatmapsCount:null,userMaximumGlobalRank:null,userMaximumPp:null,userMinimumPp:null,userMinimumRank:null,beatmapEarliestSubmissionDate:"2007-01-01",beatmapLatestSubmissionDate:"2100-01-01",beatmapMinimumFavorites:null,beatmapMinimumPlayCount:null,beatmapMinimumLength:null,beatmapMaximumLength:null,isUniqueToRanked:0,isOsuOriginal:0,additionalRequirement:""}},computed:{...L(["loggedInUser"])},async created(){const i=await this.$http.executeGet("/featuredArtists");i&&(this.featuredArtists=i.sort((s,e)=>s.label.toLowerCase()>e.label.toLowerCase()?1:e.label.toLowerCase()>s.label.toLowerCase()?-1:0))},methods:{addArtist(){if(this.selectedArtistId.length){const i=this.featuredArtists.findIndex(a=>a.id==this.selectedArtistId),s=this.featuredArtists[i],e={id:s.id,_id:s._id,label:s.label,osuId:s.osuId};this.selectedArtists.push(e)}},addMode(){this.selectedMode.length&&this.selectedModes.push(this.selectedMode)},addDifficulty(){this.selectedDifficulty.length&&this.selectedDifficulties.push(this.selectedDifficulty)},removeArtist(i){const s=this.selectedArtists.findIndex(e=>e.id==i);this.selectedArtists.splice(s,1)},removeMode(i){const s=this.selectedModes.findIndex(e=>e==i);this.selectedModes.splice(s,1)},removeDifficulty(i){const s=this.selectedDifficulties.findIndex(e=>e==i);this.selectedDifficulties.splice(s,1)},async addMission(i){if(typeof this.name=="number"){this.$store.dispatch("updateToastMessages",{message:"Choose a name that doesn't start with a number",type:"danger"});return}const s=await this.$http.executePost("/admin/missions/create",{artists:this.selectedArtists,tier:this.tier,name:this.name,deadline:this.deadline,objective:this.objective,modes:this.selectedModes,winCondition:this.winCondition,isShowcaseMission:new Boolean(this.isShowcaseMission),isArtistShowcase:new Boolean(this.isArtistShowcase),userMaximumRankedBeatmapsCount:this.userMaximumRankedBeatmapsCount,userMaximumGlobalRank:this.userMaximumGlobalRank,userMaximumPp:this.userMaximumPp,userMinimumPp:this.userMinimumPp,userMinimumRank:this.userMinimumRank,beatmapEarliestSubmissionDate:this.beatmapEarliestSubmissionDate,beatmapLatestSubmissionDate:this.beatmapLatestSubmissionDate,beatmapMinimumFavorites:this.beatmapMinimumFavorites,beatmapMinimumPlayCount:this.beatmapMinimumPlayCount,beatmapDifficulties:this.selectedDifficulties,beatmapMinimumLength:this.beatmapMinimumLength,beatmapMaximumLength:this.beatmapMaximumLength,isUniqueToRanked:new Boolean(this.isUniqueToRanked),isOsuOriginal:new Boolean(this.isOsuOriginal),additionalRequirement:this.additionalRequirement},i);this.$http.isError(s)||(this.$store.commit("addMission",s),this.$bs.hideModal("submitMission"))}}}),J={class:"container"},X=t("h5",null,"General",-1),Z={class:"row"},ss=t("option",{value:"-",disabled:""}," --- ",-1),is=["value"],ts={class:"col-sm-1"},es={class:"small text-secondary"},ns={key:0},os=["onClick"],as=t("i",{class:"fas fa-minus"},null,-1),ms=[as],ls={class:"row"},ds=t("option",{value:"-",disabled:""}," --- ",-1),us=["value"],rs={class:"col-sm-1"},cs={class:"mt-2"},ps={class:"small text-secondary"},hs={key:0},bs=["onClick"],fs=t("i",{class:"fas fa-minus"},null,-1),gs=[fs],Ms=t("hr",null,null,-1),vs=t("h5",null,"Classified",-1),$s=t("hr",null,null,-1),ws=t("h5",null,"User requirements",-1),ys=t("hr",null,null,-1),ks=t("h5",null,"Beatmap requirements",-1),Cs={class:"row"},As=t("option",{value:"-",disabled:""}," --- ",-1),_s=["value"],Is={class:"col-sm-1"},Ss={class:"small text-secondary"},Us=["onClick"],Rs=t("i",{class:"fas fa-minus"},null,-1),Ts=[Rs];function Vs(i,s,e,a,C,_){const g=M("form-select"),c=M("form-input"),b=M("form-textarea"),n=M("modal-dialog");return l(),I(n,{id:"submitMission",title:"Submit mission","modal-size":"xl"},{default:A(()=>[t("div",J,[X,t("div",Z,[r(g,{modelValue:i.selectedArtistId,"onUpdate:modelValue":s[0]||(s[0]=o=>i.selectedArtistId=o),class:"col-sm-11",label:"Artist",placeholder:"Any artist (selected by default)"},{default:A(()=>[ss,(l(!0),u($,null,v(i.featuredArtists,o=>(l(),u("option",{key:o.id,value:o.id},d(o.label),9,is))),128))]),_:1},8,["modelValue"]),t("div",ts,[t("button",{id:"artistButton",class:"btn btn-sm btn-outline-info",onClick:s[1]||(s[1]=o=>i.addArtist())}," Add ")])]),t("div",null,[t("ul",es,[i.selectedArtists.length?k("",!0):(l(),u("li",ns," Any artist (selected by default) ")),(l(!0),u($,null,v(i.selectedArtists,o=>(l(),u("li",{key:o.osuId},[m(d(o.label)+" ",1),t("a",{href:"#",class:"text-danger",onClick:R(S=>i.removeArtist(o.id),["prevent"])},ms,8,os)]))),128))])]),t("div",ls,[r(g,{modelValue:i.selectedMode,"onUpdate:modelValue":s[2]||(s[2]=o=>i.selectedMode=o),class:"col-sm-11",label:"Mode",placeholder:"Any mode (selected by default)"},{default:A(()=>[ds,(l(!0),u($,null,v(i.modes,o=>(l(),u("option",{key:o,value:o},d(o),9,us))),128))]),_:1},8,["modelValue"]),t("div",rs,[t("button",{id:"artistButton",class:"btn btn-sm btn-outline-info",onClick:s[3]||(s[3]=o=>i.addMode())}," Add ")])]),t("div",cs,[t("ul",ps,[i.selectedModes.length?k("",!0):(l(),u("li",hs," Any mode (selected by default) ")),(l(!0),u($,null,v(i.selectedModes,o=>(l(),u("li",{key:o},[m(d(o)+" ",1),t("a",{href:"#",class:"text-danger",onClick:R(S=>i.removeMode(o),["prevent"])},gs,8,bs)]))),128))])]),r(c,{modelValue:i.tier,"onUpdate:modelValue":s[4]||(s[4]=o=>i.tier=o),modelModifiers:{number:!0},label:"Tier",type:"number"},null,8,["modelValue"]),r(c,{modelValue:i.name,"onUpdate:modelValue":s[5]||(s[5]=o=>i.name=o),label:"Name",type:"text"},null,8,["modelValue"]),r(b,{modelValue:i.objective,"onUpdate:modelValue":s[6]||(s[6]=o=>i.objective=o),label:"Objective"},null,8,["modelValue"]),r(b,{modelValue:i.winCondition,"onUpdate:modelValue":s[7]||(s[7]=o=>i.winCondition=o),label:"Win condition"},null,8,["modelValue"]),r(c,{modelValue:i.deadline,"onUpdate:modelValue":s[8]||(s[8]=o=>i.deadline=o),label:"Deadline",type:"date"},null,8,["modelValue"]),Ms,vs,r(c,{modelValue:i.isShowcaseMission,"onUpdate:modelValue":s[9]||(s[9]=o=>i.isShowcaseMission=o),modelModifiers:{number:!0},label:"isShowcaseMission",description:"indicates if a quest includes unreleased featured artists (0 = false, 1 = true)",type:"number"},null,8,["modelValue"]),r(c,{modelValue:i.isArtistShowcase,"onUpdate:modelValue":s[10]||(s[10]=o=>i.isArtistShowcase=o),modelModifiers:{number:!0},label:"isArtistShowcase",description:"indicates if a showcase quest is artist-based instead of song-based (0 = false, 1 = true)",type:"number"},null,8,["modelValue"]),$s,ws,r(c,{modelValue:i.userMaximumRankedBeatmapsCount,"onUpdate:modelValue":s[11]||(s[11]=o=>i.userMaximumRankedBeatmapsCount=o),modelModifiers:{number:!0},label:"Max ranked maps",type:"number"},null,8,["modelValue"]),r(c,{modelValue:i.userMaximumGlobalRank,"onUpdate:modelValue":s[12]||(s[12]=o=>i.userMaximumGlobalRank=o),modelModifiers:{number:!0},label:"Max global rank",type:"number"},null,8,["modelValue"]),r(c,{modelValue:i.userMaximumPp,"onUpdate:modelValue":s[13]||(s[13]=o=>i.userMaximumPp=o),modelModifiers:{number:!0},label:"Max pp",type:"number"},null,8,["modelValue"]),r(c,{modelValue:i.userMinimumPp,"onUpdate:modelValue":s[14]||(s[14]=o=>i.userMinimumPp=o),modelModifiers:{number:!0},label:"Min pp",type:"number"},null,8,["modelValue"]),r(c,{modelValue:i.userMinimumRank,"onUpdate:modelValue":s[15]||(s[15]=o=>i.userMinimumRank=o),modelModifiers:{number:!0},label:"Minimum mg rank",type:"number"},null,8,["modelValue"]),ys,ks,r(c,{modelValue:i.beatmapEarliestSubmissionDate,"onUpdate:modelValue":s[16]||(s[16]=o=>i.beatmapEarliestSubmissionDate=o),modelModifiers:{number:!0},label:"Earliest submission date",description:"has label and validation if >2007",type:"date"},null,8,["modelValue"]),r(c,{modelValue:i.beatmapLatestSubmissionDate,"onUpdate:modelValue":s[17]||(s[17]=o=>i.beatmapLatestSubmissionDate=o),modelModifiers:{number:!0},label:"Latest submission date",description:"has label and validation if <2050",type:"date"},null,8,["modelValue"]),r(c,{modelValue:i.beatmapMinimumFavorites,"onUpdate:modelValue":s[18]||(s[18]=o=>i.beatmapMinimumFavorites=o),modelModifiers:{number:!0},label:"Minimum favorites",description:"has label and validation if set. paired with minimum playcount (min fav or min playcount)",type:"number"},null,8,["modelValue"]),r(c,{modelValue:i.beatmapMinimumPlayCount,"onUpdate:modelValue":s[19]||(s[19]=o=>i.beatmapMinimumPlayCount=o),modelModifiers:{number:!0},label:"Minimum playcount",description:"has label and validation if set. paired with minimum favorites (min fav or min playcount)",type:"number"},null,8,["modelValue"]),t("div",Cs,[r(g,{modelValue:i.selectedDifficulty,"onUpdate:modelValue":s[20]||(s[20]=o=>i.selectedDifficulty=o),class:"col-sm-11",label:"Difficulties",placeholder:"Select a difficulty..."},{default:A(()=>[As,(l(),u($,null,v(["Easy","Normal","Hard","Insane","Expert"],o=>t("option",{key:o,value:o},d(o),9,_s)),64))]),_:1},8,["modelValue"]),t("div",Is,[t("button",{id:"difficultyButton",class:"btn btn-sm btn-outline-info",onClick:s[21]||(s[21]=o=>i.addDifficulty())}," Add ")])]),t("div",null,[t("ul",Ss,[(l(!0),u($,null,v(i.selectedDifficulties,o=>(l(),u("li",{key:o},[m(d(o)+" ",1),t("a",{href:"#",class:"text-danger",onClick:R(S=>i.removeDifficulty(o),["prevent"])},Ts,8,Us)]))),128))])]),r(c,{modelValue:i.beatmapMinimumLength,"onUpdate:modelValue":s[22]||(s[22]=o=>i.beatmapMinimumLength=o),modelModifiers:{number:!0},label:"Minimum length",description:"in seconds. only label (no validation)",type:"number"},null,8,["modelValue"]),r(c,{modelValue:i.beatmapMaximumLength,"onUpdate:modelValue":s[23]||(s[23]=o=>i.beatmapMaximumLength=o),modelModifiers:{number:!0},label:"Maximum length",description:"in seconds. only label (no validation)",type:"number"},null,8,["modelValue"]),r(c,{modelValue:i.isUniqueToRanked,"onUpdate:modelValue":s[24]||(s[24]=o=>i.isUniqueToRanked=o),modelModifiers:{number:!0},label:"isUniqueToRanked",description:"0 = false, 1 = true. only label (no validation)",type:"number"},null,8,["modelValue"]),r(c,{modelValue:i.isOsuOriginal,"onUpdate:modelValue":s[25]||(s[25]=o=>i.isOsuOriginal=o),modelModifiers:{number:!0},label:"isOsuOriginal",description:"0 = false, 1 = true. only label (no validation)",type:"number"},null,8,["modelValue"]),r(c,{modelValue:i.additionalRequirement,"onUpdate:modelValue":s[26]||(s[26]=o=>i.additionalRequirement=o),label:"Additional requirement",description:"only label (no validation)",type:"text"},null,8,["modelValue"]),t("button",{class:"btn btn-outline-success w-100",onClick:s[27]||(s[27]=o=>i.addMission(o))}," Add mission ")])]),_:1})}const Ps=V(Y,[["render",Vs]]),Ds={state:{missions:[]},mutations:{setMissions(i,s){i.missions=s},updateMission(i,s){const e=i.missions.findIndex(a=>a.id===s.id);e!==-1&&(i.missions[e]=s)},addMission(i,s){i.missions.push(s)},updateName(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.name=s.name)},updateTier(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.tier=s.tier)},updateObjective(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.objective=s.objective)},updateStatus(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.status=s.status)},updateWinCondition(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.winCondition=s.winCondition)},updateIsShowcaseMission(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.isShowcaseMission=s.isShowcaseMission)},updateIsArtistShowcase(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.isArtistShowcase=s.isArtistShowcase)},updateIsSeparate(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.isSeparate=s.isSeparate)},updateRemainingArtists(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.remainingArtists=s.remainingArtists)},updateOpeningAnnounced(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.openingAnnounced=s.openingAnnounced)},updateClosingAnnounced(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.closingAnnounced=s.closingAnnounced)},updateWinningBeatmaps(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.winningBeatmaps=s.winningBeatmaps)},updateInvalidBeatmaps(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.invalidBeatmaps=s.invalidBeatmaps)},updateAssociatedMaps(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.associatedMaps=s.associatedMaps)},updateModes(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.modes=s.modes)},updateArtists(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.artists=s.artists)},updateUserMaximumRankedBeatmapsCount(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.userMaximumRankedBeatmapsCount=s.userMaximumRankedBeatmapsCount)},updateUserMaximumGlobalRank(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.userMaximumGlobalRank=s.userMaximumGlobalRank)},updateUserMaximumPp(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.userMaximumPp=s.userMaximumPp)},updateUserMinimumPp(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.userMinimumPp=s.userMinimumPp)},updateUserMinimumRank(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.userMinimumRank=s.userMinimumRank)},updateBeatmapEarliestSubmissionDate(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.beatmapEarliestSubmissionDate=s.beatmapEarliestSubmissionDate)},updateBeatmapLatestSubmissionDate(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.beatmapLatestSubmissionDate=s.beatmapLatestSubmissionDate)},updateBeatmapMinimumFavorites(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.beatmapMinimumFavorites=s.beatmapMinimumFavorites)},updateBeatmapMinimumPlayCount(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.beatmapMinimumPlayCount=s.beatmapMinimumPlayCount)},updateBeatmapDifficulties(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.beatmapDifficulties=s.beatmapDifficulties)},updateBeatmapMinimumLength(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.beatmapMinimumLength=s.beatmapMinimumLength)},updateBeatmapMaximumLength(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.beatmapMaximumLength=s.beatmapMaximumLength)},updateIsUniqueToRanked(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.isUniqueToRanked=s.isUniqueToRanked)},updateIsOsuOriginal(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.isOsuOriginal=s.isOsuOriginal)},updateDeadline(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.deadline=s.deadline)},updateAdditionalRequirement(i,s){const e=i.missions.find(a=>a.id==s.missionId);e&&(e.additionalRequirement=s.additionalRequirement)}}},Ls=Ds,xs=T({name:"ContestAnnouncements",props:{mission:{type:Object,required:!0}},data(){return{keychainText:""}},watch:{mission(){this.setKeychainText()}},created(){this.setKeychainText()},methods:{setKeychainText(){this.keychainText=`hello! you're receiving this message because you recently completed [**${this.mission.name}**](https://mappersguild.com/missions?id=${this.mission.id}) (a [mappers' guild priority quest](https://mappersguild.com/missions))

if you want the keychain prize associated with your map, fill out this form: https://docs.google.com/forms/d/e/1FAIpQLSeSiYhbRY2uJLBGuzwSFL5NVuDKRK5eaOlpVNtM7HPtYfd_Tw/viewform?usp=sf_link

thank you!!!`},async sendAnnouncement(i){if(confirm("Are you sure?")){const e=await this.$http.executePost(`/admin/missions/${this.mission.id}/sendAnnouncement`,{text:this.keychainText},i);this.$http.isError(e)||this.$store.dispatch("updateToastMessages",{message:"Announcement sent",type:"info"})}}}}),Bs={class:"ms-2 mb-2"};function Os(i,s,e,a,C,_){return l(),u("div",null,[t("div",Bs,[h(t("textarea",{"onUpdate:modelValue":s[0]||(s[0]=g=>i.keychainText=g),length:"4",class:"ml-1 form-control",maxlength:"40000",rows:"6"},null,512),[[f,i.keychainText]]),t("button",{class:"btn btn-sm w-100 btn-primary mt-2",onClick:s[1]||(s[1]=g=>i.sendAnnouncement(g))}," Send announcement ")])])}const qs=V(xs,[["render",Os]]),Es=T({name:"MissionInfo",components:{AssociatedBeatmaps:E,ModalDialog:q,KeychainAnnouncement:qs},props:{mission:{type:Object,required:!0}},data(){return{availableArtists:[],availableModes:O,selectedArtist:{},selectedDifficulty:"",name:this.mission.name,tier:this.mission.tier,objective:this.mission.objective,winCondition:this.mission.winCondition,status:this.mission.status,mode:"",artists:this.mission.artists,deadline:new Date(this.mission.deadline),remainingArtists:this.mission.remainingArtists,userMaximumRankedBeatmapsCount:this.mission.userMaximumRankedBeatmapsCount,userMaximumGlobalRank:this.mission.userMaximumGlobalRank,userMaximumPp:this.mission.userMaximumPp,userMinimumPp:this.mission.userMinimumPp,userMinimumRank:this.mission.userMinimumRank,beatmapEarliestSubmissionDate:new Date(this.mission.beatmapEarliestSubmissionDate),beatmapLatestSubmissionDate:new Date(this.mission.beatmapLatestSubmissionDate),beatmapMinimumFavorites:this.mission.beatmapMinimumFavorites,beatmapMinimumPlayCount:this.mission.beatmapMinimumPlayCount,beatmapMinimumLength:this.mission.beatmapMinimumLength,beatmapMaximumLength:this.mission.beatmapMaximumLength,isUniqueToRanked:this.mission.isUniqueToRanked,isOsuOriginal:this.mission.isOsuOriginal,additionalRequirement:this.mission.additionalRequirement,difficulties:["Easy","Normal","Hard","Insane","Expert"]}},computed:{sortedTasks(){const i=j;return[...this.mission.beatmapDifficulties].sort(function(s,e){return i.indexOf(s)-i.indexOf(e)})}},watch:{mission(){this.name=this.mission.name,this.tier=this.mission.tier,this.objective=this.mission.objective,this.winCondition=this.mission.winCondition,this.status=this.mission.status,this.mode="",this.artists=this.mission.artists,this.deadline=new Date(this.mission.deadline),this.remainingArtists=this.mission.remainingArtists,this.userMaximumRankedBeatmapsCount=this.mission.userMaximumRankedBeatmapsCount,this.userMaximumGlobalRank=this.mission.userMaximumGlobalRank,this.userMaximumPp=this.mission.userMaximumPp,this.userMinimumPp=this.mission.userMinimumPp,this.userMinimumRank=this.mission.userMinimumRank,this.beatmapEarliestSubmissionDate=new Date(this.mission.beatmapEarliestSubmissionDate),this.beatmapLatestSubmissionDate=new Date(this.mission.beatmapLatestSubmissionDate),this.beatmapMinimumFavorites=this.mission.beatmapMinimumFavorites,this.beatmapMinimumPlayCount=this.mission.beatmapMinimumPlayCount,this.beatmapMinimumLength=this.mission.beatmapMinimumLength,this.beatmapMaximumLength=this.mission.beatmapMaximumLength,this.isUniqueToRanked=this.mission.isUniqueToRanked,this.isOsuOriginal=this.mission.isOsuOriginal,this.additionalRequirement=this.mission.additionalRequirement}},async created(){const i=await this.$http.executeGet("/featuredArtists");i&&(this.availableArtists=i.sort((s,e)=>s.label.toLowerCase()>e.label.toLowerCase()?1:e.label.toLowerCase()>s.label.toLowerCase()?-1:0))},methods:{async updateName(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/rename`,{name:this.name},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"renamed mission",type:"info"}),this.$store.commit("updateName",{missionId:this.mission.id,name:s}))},async updateTier(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateTier`,{tier:this.tier},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated tier",type:"info"}),this.$store.commit("updateTier",{missionId:this.mission.id,tier:s}))},async updateObjective(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateObjective/`,{objective:this.objective},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated objective",type:"info"}),this.$store.commit("updateObjective",{missionId:this.mission.id,objective:s}))},async updateWinCondition(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateWinCondition/`,{winCondition:this.winCondition},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated win condition",type:"info"}),this.$store.commit("updateWinCondition",{missionId:this.mission.id,winCondition:s}))},async updateStatus(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateStatus/`,{status:this.status},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated status",type:"info"}),this.$store.commit("updateStatus",{missionId:this.mission.id,status:s}))},async toggleMode(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/toggleMode/`,{mode:this.mode},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"toggled mode",type:"info"}),this.$store.commit("updateModes",{missionId:this.mission.id,modes:s}))},async toggleArtist(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/toggleArtist/`,{artistLabel:this.selectedArtist},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"toggled artist",type:"info"}),this.$store.commit("updateArtists",{missionId:this.mission.id,artists:s}))},async updateDeadline(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateDeadline/`,{deadline:this.deadline},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated deadline",type:"info"}),this.$store.commit("updateDeadline",{missionId:this.mission.id,deadline:s}))},async toggleIsShowcaseMission(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/toggleIsShowcaseMission/`,{isShowcaseMission:!this.mission.isShowcaseMission},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"toggled isShowcaseMission",type:"info"}),this.$store.commit("updateIsShowcaseMission",{missionId:this.mission.id,isShowcaseMission:s}))},async toggleIsArtistShowcase(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/toggleIsArtistShowcase/`,{isArtistShowcase:!this.mission.isArtistShowcase},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"toggled isArtistShowcase",type:"info"}),this.$store.commit("updateIsArtistShowcase",{missionId:this.mission.id,isArtistShowcase:s}))},async toggleIsSeparate(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/toggleIsSeparate/`,{isSeparate:!this.mission.isSeparate},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"toggled isSeparate",type:"info"}),this.$store.commit("updateIsSeparate",{missionId:this.mission.id,isSeparate:s}))},async updateRemainingArtists(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateRemainingArtists`,{remainingArtists:this.remainingArtists},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated remainingArtists",type:"info"}),this.$store.commit("updateRemainingArtists",{missionId:this.mission.id,remainingArtists:s}))},async toggleOpeningAnnounced(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/toggleOpeningAnnounced/`,{openingAnnounced:!this.mission.openingAnnounced},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"toggled openingAnnounced",type:"info"}),this.$store.commit("updateOpeningAnnounced",{missionId:this.mission.id,openingAnnounced:s}))},async toggleClosingAnnounced(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/toggleClosingAnnounced/`,{closingAnnounced:!this.mission.closingAnnounced},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"toggled closingAnnounced",type:"info"}),this.$store.commit("updateClosingAnnounced",{missionId:this.mission.id,closingAnnounced:s}))},async updateUserMaximumRankedBeatmapsCount(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateUserMaximumRankedBeatmapsCount/`,{userMaximumRankedBeatmapsCount:this.userMaximumRankedBeatmapsCount},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated user max ranked maps count for mission",type:"info"}),this.$store.commit("updateUserMaximumRankedBeatmapsCount",{missionId:this.mission.id,userMaximumRankedBeatmapsCount:s}))},async updateUserMaximumGlobalRank(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateUserMaximumGlobalRank/`,{userMaximumGlobalRank:this.userMaximumGlobalRank},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated user max global rank for mission",type:"info"}),this.$store.commit("updateUserMaximumGlobalRank",{missionId:this.mission.id,userMaximumGlobalRank:s}))},async updateUserMaximumPp(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateUserMaximumPp/`,{userMaximumPp:this.userMaximumPp},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated user max pp for mission",type:"info"}),this.$store.commit("updateUserMaximumPp",{missionId:this.mission.id,userMaximumPp:s}))},async updateUserMinimumPp(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateUserMinimumPp/`,{userMinimumPp:this.userMinimumPp},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated user min pp for mission",type:"info"}),this.$store.commit("updateUserMinimumPp",{missionId:this.mission.id,userMinimumPp:s}))},async updateUserMinimumRank(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateUserMinimumRank/`,{userMinimumRank:this.userMinimumRank},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated user min mg rank for mission",type:"info"}),this.$store.commit("updateUserMinimumRank",{missionId:this.mission.id,userMinimumRank:s}))},async updateBeatmapEarliestSubmissionDate(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateBeatmapEarliestSubmissionDate/`,{beatmapEarliestSubmissionDate:this.beatmapEarliestSubmissionDate},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated beatmap earliest submission date",type:"info"}),this.$store.commit("updateBeatmapEarliestSubmissionDate",{missionId:this.mission.id,beatmapEarliestSubmissionDate:s}))},async updateBeatmapLatestSubmissionDate(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateBeatmapLatestSubmissionDate/`,{beatmapLatestSubmissionDate:this.beatmapLatestSubmissionDate},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated beatmap latest submission date",type:"info"}),this.$store.commit("updateBeatmapLatestSubmissionDate",{missionId:this.mission.id,beatmapLatestSubmissionDate:s}))},async updateBeatmapMinimumFavorites(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateBeatmapMinimumFavorites/`,{beatmapMinimumFavorites:this.beatmapMinimumFavorites},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated beatmap minimum favorites",type:"info"}),this.$store.commit("updateBeatmapMinimumFavorites",{missionId:this.mission.id,beatmapMinimumFavorites:s}))},async updateBeatmapMinimumPlayCount(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateBeatmapMinimumPlayCount/`,{beatmapMinimumPlayCount:this.beatmapMinimumPlayCount},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated beatmap minimum playcount",type:"info"}),this.$store.commit("updateBeatmapMinimumPlayCount",{missionId:this.mission.id,beatmapMinimumPlayCount:s}))},async toggleDifficulty(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/toggleDifficulty/`,{difficulty:this.selectedDifficulty},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"toggled difficulty",type:"info"}),this.$store.commit("updateBeatmapDifficulties",{missionId:this.mission.id,beatmapDifficulties:s}))},async updateBeatmapMinimumLength(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateBeatmapMinimumLength/`,{beatmapMinimumLength:this.beatmapMinimumLength},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated beatmap minimum length",type:"info"}),this.$store.commit("updateBeatmapMinimumLength",{missionId:this.mission.id,beatmapMinimumLength:s}))},async updateBeatmapMaximumLength(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateBeatmapMaximumLength/`,{beatmapMaximumLength:this.beatmapMaximumLength},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated beatmap maximum length",type:"info"}),this.$store.commit("updateBeatmapMaximumLength",{missionId:this.mission.id,beatmapMaximumLength:s}))},async toggleIsUniqueToRanked(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/toggleIsUniqueToRanked/`,{isUniqueToRanked:!this.mission.isUniqueToRanked},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"toggled isUniqueToRanked",type:"info"}),this.$store.commit("updateIsUniqueToRanked",{missionId:this.mission.id,isUniqueToRanked:s}))},async toggleIsOsuOriginal(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/toggleIsOsuOriginal/`,{isOsuOriginal:!this.mission.isOsuOriginal},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"toggled isOsuOriginal",type:"info"}),this.$store.commit("updateIsOsuOriginal",{missionId:this.mission.id,isOsuOriginal:s}))},async updateAdditionalRequirement(i){const s=await this.$http.executePost(`/admin/missions/${this.mission.id}/updateAdditionalRequirement/`,{additionalRequirement:this.additionalRequirement},i);this.$http.isError(s)||(this.$store.dispatch("updateToastMessages",{message:"updated beatmap additional requirement",type:"info"}),this.$store.commit("updateAdditionalRequirement",{missionId:this.mission.id,additionalRequirement:s}))}}}),js={class:"container"},Gs={class:"row mt-2 d-flex align-items-center"},Fs=t("div",{class:"col-sm-2"}," Name ",-1),zs={class:"col-sm-6"},Ns={class:"col-sm-4"},Ws={class:"row mt-2 d-flex align-items-center"},Qs=t("div",{class:"col-sm-2"}," Tier ",-1),Ks={class:"col-sm-6"},Hs={class:"col-sm-4"},Ys={class:"row mt-2 d-flex align-items-center"},Js=t("div",{class:"col-sm-2"}," Objective ",-1),Xs={class:"col-sm-6"},Zs={class:"col-sm-4"},si={class:"row mt-2 d-flex align-items-center"},ii=t("div",{class:"col-sm-2"}," Win condition ",-1),ti={class:"col-sm-6"},ei={class:"col-sm-4"},ni={class:"row mt-2 d-flex align-items-center"},oi=t("div",{class:"col-sm-2"}," Status ",-1),ai={class:"col-sm-6"},mi=t("option",{value:"",disabled:""}," Select a status ",-1),li=t("option",{value:"hidden"}," Hidden ",-1),di=t("option",{value:"open"}," Open ",-1),ui=t("option",{value:"closed"}," Closed ",-1),ri=[mi,li,di,ui],ci={class:"col-sm-4"},pi={class:"row mt-2 d-flex align-items-center"},hi=t("div",{class:"col-sm-2"}," Mode ",-1),bi={class:"col-sm-2"},fi=t("option",{value:"",disabled:""}," Select a mode ",-1),gi={class:"col-sm-4"},Mi={class:"small text-secondary"},vi={class:"col-sm-4"},$i={key:0,class:"row mt-2 d-flex align-items-center"},wi=t("div",{class:"col-sm-2"}," Artists ",-1),yi={class:"col-sm-2"},ki=t("option",{value:{},disabled:""}," Select an artist ",-1),Ci={class:"col-sm-4"},Ai={class:"small text-secondary"},_i={class:"col-sm-4"},Ii={class:"row mt-2 d-flex align-items-center"},Si=t("div",{class:"col-sm-2"}," Deadline ",-1),Ui={class:"col-sm-2"},Ri={class:"col-sm-4 small text-secondary"},Ti={class:"col-sm-4"},Vi={class:"row d-flex mt-2 align-items-center"},Pi=t("div",{class:"col-sm-4"}," isShowcaseMission ",-1),Di={class:"col-sm-4 small text-secondary"},Li={class:"col-sm-4"},xi={class:"row d-flex mt-2 align-items-center"},Bi=t("div",{class:"col-sm-4"}," isArtistShowcase ",-1),Oi={class:"col-sm-4 small text-secondary"},qi={class:"col-sm-4"},Ei={class:"row d-flex mt-2 align-items-center"},ji=t("div",{class:"col-sm-4"}," isSeparate ",-1),Gi={class:"col-sm-4 small text-secondary"},Fi={class:"col-sm-4"},zi={class:"row mt-2 d-flex align-items-center"},Ni=t("div",{class:"col-sm-2"}," remainingArtists ",-1),Wi={class:"col-sm-2"},Qi={class:"col-sm-4 small text-secondary"},Ki={class:"col-sm-4"},Hi={class:"row d-flex mt-2 align-items-center"},Yi=t("div",{class:"col-sm-4"}," Opening announced ",-1),Ji={class:"col-sm-4 small text-secondary"},Xi={class:"col-sm-4"},Zi={class:"row d-flex mt-2 align-items-center"},st=t("div",{class:"col-sm-4"}," Closing announced ",-1),it={class:"col-sm-4 small text-secondary"},tt={class:"col-sm-4"},et=t("hr",null,null,-1),nt=t("h5",null,"User requirements",-1),ot={class:"row d-flex mt-2 align-items-center"},at=t("div",{class:"col-sm-2"}," Max. ranked maps ",-1),mt={class:"col-sm-2"},lt=t("div",{class:"col-sm-4 small text-secondary"},[m(" Includes: "),t("b",null,"label, validation")],-1),dt={class:"col-sm-4"},ut={class:"row d-flex mt-2 align-items-center"},rt=t("div",{class:"col-sm-2"}," Max. global rank ",-1),ct={class:"col-sm-2"},pt=t("div",{class:"col-sm-4 small text-secondary"},[m(" Includes: "),t("b",null,"label, validation")],-1),ht={class:"col-sm-4"},bt={class:"row d-flex mt-2 align-items-center"},ft=t("div",{class:"col-sm-2"}," Max. pp ",-1),gt={class:"col-sm-2"},Mt=t("div",{class:"col-sm-4 small text-secondary"},[m(" Includes: "),t("b",null,"label, validation")],-1),vt={class:"col-sm-4"},$t={class:"row d-flex mt-2 align-items-center"},wt=t("div",{class:"col-sm-2"}," Min. pp ",-1),yt={class:"col-sm-2"},kt=t("div",{class:"col-sm-4 small text-secondary"},[m(" Includes: "),t("b",null,"label, validation")],-1),Ct={class:"col-sm-4"},At={class:"row d-flex mt-2 align-items-center"},_t=t("div",{class:"col-sm-2"}," Min. MG rank ",-1),It={class:"col-sm-2"},St=t("div",{class:"col-sm-4 small text-secondary"},[m(" Includes: "),t("b",null,"label, validation")],-1),Ut={class:"col-sm-4"},Rt=t("hr",null,null,-1),Tt=t("h5",null,"Beatmap requirements",-1),Vt={class:"row d-flex mt-2 align-items-center"},Pt=t("div",{class:"col-sm-2"}," Earliest submission date ",-1),Dt={class:"col-sm-2"},Lt={class:"col-sm-4 small text-secondary"},xt=t("div",null,[m("Includes: "),t("b",null,"label, validation"),m(" (if >2007)")],-1),Bt={class:"col-sm-4"},Ot={class:"row d-flex mt-2 align-items-center"},qt=t("div",{class:"col-sm-2"}," Latest submission date ",-1),Et={class:"col-sm-2"},jt={class:"col-sm-4 small text-secondary"},Gt=t("div",null,[m("Includes: "),t("b",null,"label, validation"),m(" (if <2050)")],-1),Ft={class:"col-sm-4"},zt={class:"row d-flex mt-2 align-items-center"},Nt=t("div",{class:"col-sm-2"}," Min. favorites ",-1),Wt={class:"col-sm-2"},Qt=t("div",{class:"col-sm-4 small text-secondary"},[t("div",null,[m("Includes: "),t("b",null,"label, validation"),m(" (if min. playcount exists)")])],-1),Kt={class:"col-sm-4"},Ht={class:"row d-flex mt-2 align-items-center"},Yt=t("div",{class:"col-sm-2"}," Min. playcount ",-1),Jt={class:"col-sm-2"},Xt=t("div",{class:"col-sm-4 small text-secondary"},[t("div",null,[m("Includes: "),t("b",null,"label, validation"),m(" (if min. favorites exists)")])],-1),Zt={class:"col-sm-4"},se={class:"row mt-2 d-flex align-items-center"},ie=t("div",{class:"col-sm-2"}," Difficulties ",-1),te={class:"col-sm-2"},ee=t("option",{value:"",disabled:""}," Select a difficulty ",-1),ne={class:"col-sm-4"},oe={class:"small text-secondary"},ae={class:"col-sm-4"},me={class:"row d-flex mt-2 align-items-center"},le=t("div",{class:"col-sm-2"}," Min. length ",-1),de={class:"col-sm-2"},ue=t("div",{class:"col-sm-4 small text-secondary"},[t("div",null,[m("Includes: "),t("b",null,"label")])],-1),re={class:"col-sm-4"},ce={class:"row d-flex mt-2 align-items-center"},pe=t("div",{class:"col-sm-2"}," Max. length ",-1),he={class:"col-sm-2"},be=t("div",{class:"col-sm-4 small text-secondary"},[t("div",null,[m("Includes: "),t("b",null,"label")])],-1),fe={class:"col-sm-4"},ge={class:"row d-flex mt-2 align-items-center"},Me=t("div",{class:"col-sm-4"}," isUniqueToRanked ",-1),ve={class:"col-sm-4 small text-secondary"},$e=t("div",null,[m("Includes: "),t("b",null,"label")],-1),we={class:"col-sm-4"},ye={class:"row d-flex mt-2 align-items-center"},ke=t("div",{class:"col-sm-4"}," isOsuOriginal ",-1),Ce={class:"col-sm-4 small text-secondary"},Ae=t("div",null,[m("Includes: "),t("b",null,"label")],-1),_e={class:"col-sm-4"},Ie={class:"row d-flex mt-2 align-items-center"},Se=t("div",{class:"col-sm-2"}," Additional req ",-1),Ue={class:"col-sm-2"},Re=t("div",{class:"col-sm-4 small text-secondary"},[t("div",null,[m("Includes: "),t("b",null,"label")])],-1),Te={class:"col-sm-4"},Ve=t("hr",null,null,-1);function Pe(i,s,e,a,C,_){const g=M("associated-beatmaps"),c=M("keychain-announcement"),b=M("modal-dialog");return l(),I(b,{id:"editMission","modal-size":"xl"},{header:A(()=>[m(d(i.mission.name)+" ("+d(i.mission.id)+") ",1)]),default:A(()=>[t("div",js,[t("div",Gs,[Fs,t("div",zs,[h(t("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>i.name=n),class:"form-control form-control-sm",type:"text",autocomplete:"off",placeholder:"mission name..."},null,512),[[f,i.name]])]),t("div",Ns,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[1]||(s[1]=n=>i.updateName(n))}," Rename ")])]),t("div",Ws,[Qs,t("div",Ks,[h(t("input",{"onUpdate:modelValue":s[2]||(s[2]=n=>i.tier=n),class:"form-control form-control-sm",type:"text",autocomplete:"off",placeholder:"tier..."},null,512),[[f,i.tier]])]),t("div",Hs,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[3]||(s[3]=n=>i.updateTier(n))}," Update tier ")])]),t("div",Ys,[Js,t("div",Xs,[h(t("textarea",{"onUpdate:modelValue":s[4]||(s[4]=n=>i.objective=n),class:"form-control form-control-sm",type:"text",autocomplete:"off",placeholder:"mission objective..."},null,512),[[f,i.objective]])]),t("div",Zs,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[5]||(s[5]=n=>i.updateObjective(n))}," Update objective ")])]),t("div",si,[ii,t("div",ti,[h(t("textarea",{"onUpdate:modelValue":s[6]||(s[6]=n=>i.winCondition=n),class:"form-control form-control-sm",type:"text",autocomplete:"off",placeholder:"mission win condition..."},null,512),[[f,i.winCondition]])]),t("div",ei,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[7]||(s[7]=n=>i.updateWinCondition(n))}," Update win condition ")])]),t("div",ni,[oi,t("div",ai,[h(t("select",{"onUpdate:modelValue":s[8]||(s[8]=n=>i.status=n),class:"form-select form-select-sm"},ri,512),[[P,i.status]])]),t("div",ci,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[9]||(s[9]=n=>i.updateStatus(n))}," Update status ")])]),t("div",pi,[hi,t("div",bi,[h(t("select",{"onUpdate:modelValue":s[10]||(s[10]=n=>i.mode=n),class:"form-select form-select-sm"},[fi,(l(!0),u($,null,v(i.availableModes,n=>(l(),u("option",{key:n},d(n),1))),128))],512),[[P,i.mode]])]),t("div",gi,[t("div",Mi,[m(" Current: "),t("b",null,d(i.mission.modes),1)])]),t("div",vi,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[11]||(s[11]=n=>i.toggleMode(n))}," Toggle mode ")])]),i.availableArtists?(l(),u("div",$i,[wi,t("div",yi,[h(t("select",{"onUpdate:modelValue":s[12]||(s[12]=n=>i.selectedArtist=n),class:"form-select form-select-sm"},[ki,(l(!0),u($,null,v(i.availableArtists,n=>(l(),u("option",{key:n.id},d(n.label),1))),128))],512),[[P,i.selectedArtist]])]),t("div",Ci,[t("div",Ai,[m(" Current: "),t("b",null,d(i.mission.artists.map(n=>n.label)),1)])]),t("div",_i,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[13]||(s[13]=n=>i.toggleArtist(n))}," Toggle artist ")])])):k("",!0),t("div",Ii,[Si,t("div",Ui,[h(t("input",{"onUpdate:modelValue":s[14]||(s[14]=n=>i.deadline=n),class:"form-control form-control-sm",type:"date",autocomplete:"off",placeholder:"deadline..."},null,512),[[f,i.deadline]])]),t("div",Ri,[m(" Current: "),t("b",null,d(i.mission.deadline),1)]),t("div",Ti,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[15]||(s[15]=n=>i.updateDeadline(n))}," Update deadline ")])]),t("div",Vi,[Pi,t("div",Di,[m(" Current: "),t("b",{class:y(i.mission.isShowcaseMission?"text-success":"text-danger")},d(i.mission.isShowcaseMission?i.mission.isShowcaseMission:"false"),3)]),t("div",Li,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[16]||(s[16]=n=>i.toggleIsShowcaseMission(n))}," Toggle isShowcaseMission ")])]),t("div",xi,[Bi,t("div",Oi,[m(" Current: "),t("b",{class:y(i.mission.isArtistShowcase?"text-success":"text-danger")},d(i.mission.isArtistShowcase?i.mission.isArtistShowcase:"false"),3)]),t("div",qi,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[17]||(s[17]=n=>i.toggleIsArtistShowcase(n))}," Toggle isArtistShowcase ")])]),t("div",Ei,[ji,t("div",Gi,[m(" Current: "),t("b",{class:y(i.mission.isSeparate?"text-success":"text-danger")},d(i.mission.isSeparate?i.mission.isSeparate:"false"),3)]),t("div",Fi,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[18]||(s[18]=n=>i.toggleIsSeparate(n))}," Toggle isSeparate ")])]),t("div",zi,[Ni,t("div",Wi,[h(t("input",{"onUpdate:modelValue":s[19]||(s[19]=n=>i.remainingArtists=n),class:"form-control form-control-sm",type:"text",autocomplete:"off",placeholder:"remaining artists..."},null,512),[[f,i.remainingArtists]])]),t("div",Qi,[m(" Current: "),t("b",null,d(i.mission.remainingArtists),1)]),t("div",Ki,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[20]||(s[20]=n=>i.updateRemainingArtists(n))}," Update remainingArtists ")])]),t("div",Hi,[Yi,t("div",Ji,[m(" Current: "),t("b",{class:y(i.mission.openingAnnounced?"text-success":"text-danger")},d(i.mission.openingAnnounced),3)]),t("div",Xi,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[21]||(s[21]=n=>i.toggleOpeningAnnounced(n))}," Toggle openingAnnounced ")])]),t("div",Zi,[st,t("div",it,[m(" Current: "),t("b",{class:y(i.mission.closingAnnounced?"text-success":"text-danger")},d(i.mission.closingAnnounced),3)]),t("div",tt,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[22]||(s[22]=n=>i.toggleClosingAnnounced(n))}," Toggle closingAnnounced ")])]),et,nt,t("div",ot,[at,t("div",mt,[h(t("input",{"onUpdate:modelValue":s[23]||(s[23]=n=>i.userMaximumRankedBeatmapsCount=n),class:"form-control form-control-sm",type:"text",autocomplete:"off",placeholder:"max ranked maps..."},null,512),[[f,i.userMaximumRankedBeatmapsCount]])]),lt,t("div",dt,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[24]||(s[24]=n=>i.updateUserMaximumRankedBeatmapsCount(n))}," Update user max ranked maps count ")])]),t("div",ut,[rt,t("div",ct,[h(t("input",{"onUpdate:modelValue":s[25]||(s[25]=n=>i.userMaximumGlobalRank=n),class:"form-control form-control-sm",type:"number",autocomplete:"off",placeholder:"max global rank..."},null,512),[[f,i.userMaximumGlobalRank]])]),pt,t("div",ht,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[26]||(s[26]=n=>i.updateUserMaximumGlobalRank(n))}," Update user max global rank ")])]),t("div",bt,[ft,t("div",gt,[h(t("input",{"onUpdate:modelValue":s[27]||(s[27]=n=>i.userMaximumPp=n),class:"form-control form-control-sm",type:"number",autocomplete:"off",placeholder:"max pp..."},null,512),[[f,i.userMaximumPp]])]),Mt,t("div",vt,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[28]||(s[28]=n=>i.updateUserMaximumPp(n))}," Update user max pp ")])]),t("div",$t,[wt,t("div",yt,[h(t("input",{"onUpdate:modelValue":s[29]||(s[29]=n=>i.userMinimumPp=n),class:"form-control form-control-sm",type:"number",autocomplete:"off",placeholder:"min pp..."},null,512),[[f,i.userMinimumPp]])]),kt,t("div",Ct,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[30]||(s[30]=n=>i.updateUserMinimumPp(n))}," Update user min pp ")])]),t("div",At,[_t,t("div",It,[h(t("input",{"onUpdate:modelValue":s[31]||(s[31]=n=>i.userMinimumRank=n),class:"form-control form-control-sm",type:"number",autocomplete:"off",placeholder:"min mg rank..."},null,512),[[f,i.userMinimumRank]])]),St,t("div",Ut,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[32]||(s[32]=n=>i.updateUserMinimumRank(n))}," Update user min rank ")])]),Rt,Tt,t("div",Vt,[Pt,t("div",Dt,[h(t("input",{"onUpdate:modelValue":s[33]||(s[33]=n=>i.beatmapEarliestSubmissionDate=n),class:"form-control form-control-sm",type:"date",autocomplete:"off",placeholder:"earliest submission date allowed..."},null,512),[[f,i.beatmapEarliestSubmissionDate]])]),t("div",Lt,[xt,t("div",null,[m("Current: "),t("b",null,d(i.mission.beatmapEarliestSubmissionDate),1)])]),t("div",Bt,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[34]||(s[34]=n=>i.updateBeatmapEarliestSubmissionDate(n))}," Update beatmap earliest submission date ")])]),t("div",Ot,[qt,t("div",Et,[h(t("input",{"onUpdate:modelValue":s[35]||(s[35]=n=>i.beatmapLatestSubmissionDate=n),class:"form-control form-control-sm",type:"date",autocomplete:"off",placeholder:"latest submission date allowed..."},null,512),[[f,i.beatmapLatestSubmissionDate]])]),t("div",jt,[Gt,t("div",null,[m("Current: "),t("b",null,d(i.mission.beatmapLatestSubmissionDate),1)])]),t("div",Ft,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[36]||(s[36]=n=>i.updateBeatmapLatestSubmissionDate(n))}," Update beatmap latest submission date ")])]),t("div",zt,[Nt,t("div",Wt,[h(t("input",{"onUpdate:modelValue":s[37]||(s[37]=n=>i.beatmapMinimumFavorites=n),class:"form-control form-control-sm",type:"number",autocomplete:"off",placeholder:"min favorites..."},null,512),[[f,i.beatmapMinimumFavorites]])]),Qt,t("div",Kt,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[38]||(s[38]=n=>i.updateBeatmapMinimumFavorites(n))}," Update beatmap minimum favorites ")])]),t("div",Ht,[Yt,t("div",Jt,[h(t("input",{"onUpdate:modelValue":s[39]||(s[39]=n=>i.beatmapMinimumPlayCount=n),class:"form-control form-control-sm",type:"number",autocomplete:"off",placeholder:"min playcount..."},null,512),[[f,i.beatmapMinimumPlayCount]])]),Xt,t("div",Zt,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[40]||(s[40]=n=>i.updateBeatmapMinimumPlayCount(n))}," Update beatmap minimum playcount ")])]),t("div",se,[ie,t("div",te,[h(t("select",{"onUpdate:modelValue":s[41]||(s[41]=n=>i.selectedDifficulty=n),class:"form-select form-select-sm"},[ee,(l(!0),u($,null,v(i.difficulties,n=>(l(),u("option",{key:n},d(n),1))),128))],512),[[P,i.selectedDifficulty]])]),t("div",ne,[t("div",oe,[m(" Current: "),t("b",null,d(i.sortedTasks.join(", ")),1)])]),t("div",ae,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[42]||(s[42]=n=>i.toggleDifficulty(n))}," Toggle difficulty ")])]),t("div",me,[le,t("div",de,[h(t("input",{"onUpdate:modelValue":s[43]||(s[43]=n=>i.beatmapMinimumLength=n),class:"form-control form-control-sm",type:"number",autocomplete:"off",placeholder:"min length..."},null,512),[[f,i.beatmapMinimumLength]])]),ue,t("div",re,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[44]||(s[44]=n=>i.updateBeatmapMinimumLength(n))}," Update beatmap minimum length ")])]),t("div",ce,[pe,t("div",he,[h(t("input",{"onUpdate:modelValue":s[45]||(s[45]=n=>i.beatmapMaximumLength=n),class:"form-control form-control-sm",type:"number",autocomplete:"off",placeholder:"max length..."},null,512),[[f,i.beatmapMaximumLength]])]),be,t("div",fe,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[46]||(s[46]=n=>i.updateBeatmapMaximumLength(n))}," Update beatmap maximum length ")])]),t("div",ge,[Me,t("div",ve,[$e,t("div",null,[m(" Current: "),t("b",{class:y(i.mission.isUniqueToRanked?"text-success":"text-danger")},d(i.mission.isUniqueToRanked?i.mission.isUniqueToRanked:"false"),3)])]),t("div",we,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[47]||(s[47]=n=>i.toggleIsUniqueToRanked(n))}," Toggle isUniqueToRanked ")])]),t("div",ye,[ke,t("div",Ce,[Ae,t("div",null,[m(" Current: "),t("b",{class:y(i.mission.isOsuOriginal?"text-success":"text-danger")},d(i.mission.isOsuOriginal?i.mission.isOsuOriginal:"false"),3)])]),t("div",_e,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[48]||(s[48]=n=>i.toggleIsOsuOriginal(n))}," Toggle isOsuOriginal ")])]),t("div",Ie,[Se,t("div",Ue,[h(t("input",{"onUpdate:modelValue":s[49]||(s[49]=n=>i.additionalRequirement=n),class:"form-control form-control-sm",type:"text",autocomplete:"off",placeholder:"additional requirement..."},null,512),[[f,i.additionalRequirement]])]),Re,t("div",Te,[t("button",{class:"btn btn-sm btn-outline-info w-100",onClick:s[50]||(s[50]=n=>i.updateAdditionalRequirement(n))}," Update additional requirement ")])]),Ve,i.mission.associatedMaps&&i.mission.associatedMaps.length?(l(),I(g,{key:1,class:"my-4",mission:i.mission,"is-admin-page":!0},null,8,["mission"])):k("",!0),r(c,{mission:i.mission},null,8,["mission"])])]),_:1})}const De=V(Es,[["render",Pe]]),Le=T({name:"MissionWinners",components:{CopyPaste:H},data(){return{date:"2023-01-01"}},computed:{...L({missions:i=>i.missionsAdmin.missions}),filteredMissions(){return this.missions.filter(i=>{if(i.status==G.Closed&&new Date(this.date)<new Date(i.createdAt))return!0})}},methods:{loadWinners(){let i=[];for(const p of this.filteredMissions)i=i.concat(p.winningBeatmaps);const s=i.map(p=>p.host),e=s.map(p=>p.username);let a=[],C=[];const _=["65a3376e48f36f2622ef2f44","665bbcc1ff4c38cea1113337","66f488cc56f3f894641d4ace"];for(const p of i)if(_.includes(p.mission.toString())){for(const w of p.tasks)if(w.name!==B.Hitsounds&&w.name!==B.Storyboard)for(const U of w.mappers)!C.includes(U.username)&&p.host.id!==U.id&&(["63035eff1e8b9e4fa900836f","62e3dedd9a268823d2e436b8","6401d31e517b1f1d40ca78e2"].includes(U.id)&&p.mission.toString()=="665bbcc1ff4c38cea1113337"||(a.push(U),C.push(U.username)))}let g=["6310166c1e8b9e4fa901f2ce","5f8fb4a5f3939239f54b4a09"],c=["Ilham","nik"];const b=s.concat(a,g);let o=e.concat(C,c).reduce(function(p,w){return p[w]?++p[w]:p[w]=1,p},{});const S=[],x=[];for(const p of b)x.includes(p.osuId)||(x.push(p.osuId),S.push({username:p.username,osuId:p.osuId,total:o[p.username],isQuestTrailblazer:p.isQuestTrailblazer}));return S.sort((p,w)=>w.total-p.total)},async toggleIsQuestTrailblazer(i,s){const e=await this.$http.executePost("/admin/missions/toggleIsQuestTrailblazer/",{userOsuId:i},s);this.$http.isError(e)||this.$store.dispatch("updateToastMessages",{message:"toggled isQuestTrailblazer, refresh to see changes",type:"info"})}}}),xe=t("h5",null,[m("Mission winners "),t("i",{class:"fas fa-angle-down"})],-1),Be=[xe],Oe={id:"missionWinners",class:"collapse ms-2"},qe=t("div",null,"Date threshold:",-1),Ee={class:"row"},je={class:"col-sm-6"},Ge={key:0},Fe=["onClick"],ze={class:"col-sm-6"};function Ne(i,s,e,a,C,_){const g=M("user-link"),c=M("copy-paste");return l(),u("div",null,[t("a",{href:"#missionWinners","data-bs-toggle":"collapse",onClick:s[0]||(s[0]=R(()=>{},["prevent"]))},Be),t("div",Oe,[qe,h(t("input",{"onUpdate:modelValue":s[1]||(s[1]=b=>i.date=b),class:"form-control form-control-sm w-25 mb-2",type:"date",autocomplete:"off",placeholder:"how far back to check"},null,512),[[f,i.date]]),t("div",Ee,[t("div",je,[(l(!0),u($,null,v(i.loadWinners(),b=>(l(),u("div",{key:b.osuId,class:"ms-4"},[r(g,{user:b},null,8,["user"]),m(" - "+d(b.total)+" ",1),b.total>=3&&!b.isQuestTrailblazer?(l(),u("code",Ge,".add-badge "+d(b.osuId)+` questtrailblazer.png "Completed 3+ priority quests in the Mappers' Guild" https://osu.ppy.sh/wiki/en/Community/Mappers_Guild#additional-rewards`,1)):k("",!0),b.total>=3&&!b.isQuestTrailblazer?(l(),u("button",{key:1,class:"btn btn-outline-info btn-sm",href:"#",onClick:R(n=>i.toggleIsQuestTrailblazer(b.osuId,n),["prevent"])}," click this after giving user badge ",8,Fe)):k("",!0)]))),128))]),t("div",ze,[r(c,null,{default:A(()=>[(l(!0),u($,null,v(i.loadWinners(),b=>(l(),u("div",{key:b.id},d(b.username),1))),128))]),_:1})])])])])}const We=V(Le,[["render",Ne]]),Qe=T({components:{DataTable:K,SubmitMissionModal:Ps,MissionInfo:De,MissionWinners:We},data(){return{selectedMissionId:"",classifiedArtists:null}},computed:{...L({missions:i=>i.missionsAdmin.missions,classifiedArtists:i=>i.classifiedArtists}),selectedMission(){return this.missions.find(i=>i.id===this.selectedMissionId)}},beforeCreate(){this.$store.hasModule("missionsAdmin")||this.$store.registerModule("missionsAdmin",Ls)},unmounted(){this.$store.hasModule("missionsAdmin")&&this.$store.unregisterModule("missionsAdmin")},methods:{async loadMissions(i){const s=await this.$http.executeGet("/admin/missions/load",i);this.$http.isError(s)||this.$store.commit("setMissions",s)},async loadClassifiedArtists(i){const s=await this.$http.executeGet("/admin/missions/loadClassifiedArtists",i);this.$http.isError(s)||(this.classifiedArtists=s)},updateMission(i){const s=this.missions.findIndex(e=>e.id==i.id);s!==-1&&(this.missions[s]=i)},findTierImage(i){switch(i){case 1:return"/images/bronze.png";case 2:return"/images/silver.png";case 3:return"/images/gold.png";case 4:return"/images/platinum.png";default:return"/images/bronze.png"}},countValidSongs(i){let s=[];for(const e of i)(e.isExcludedFromClassified||!e.oszUrl)&&s.push(`${e.artist} - ${e.title}`);return s.length?`(${i.length-s.length} of ${i.length}) ${s.join(", ")}`:""}}});const D=i=>(F("data-v-419abe98"),i=i(),z(),i),Ke=D(()=>t("div",{class:"container card card-body py-3 mb-2"},[t("h5",null,"Create mission"),t("button",{class:"btn btn-sm btn-info w-100 mb-1","data-bs-toggle":"modal","data-bs-target":"#submitMission"}," Add mission ")],-1)),He={class:"container card card-body py-3 mb-2"},Ye=D(()=>t("h5",null,"Missions list",-1)),Je=["src"],Xe={class:"container card card-body py-3 mb-2"},Ze=D(()=>t("h5",null,"Classified quest artists",-1)),sn=D(()=>t("div",null,[m("This shows unreleased artists who are marked with "),t("code",null,"[showcase]"),m(", have "),t("code",null,"[timing]"),m(" completed, and have songs added to MG database.")],-1)),tn={class:"small text-secondary"};function en(i,s,e,a,C,_){const g=M("data-table"),c=M("mission-winners"),b=M("submit-mission-modal"),n=M("mission-info");return l(),u("div",null,[Ke,t("div",He,[Ye,t("button",{class:"btn btn-sm btn-info w-100 mb-2",onClick:s[0]||(s[0]=o=>i.loadMissions(o))}," Load missions and winners "),i.missions.length?(l(),I(g,{key:0,data:i.missions,headers:["name","tier","status","announce"],"custom-data-target":"#editMission","onUpdate:selectedId":s[1]||(s[1]=o=>i.selectedMissionId=o)},{default:A(({obj:o})=>[t("td",null,d(o.name),1),t("td",null,[t("img",{src:i.findTierImage(o.tier),class:"table-mission-tier"},null,8,Je)]),t("td",null,d(o.status),1),t("td",null,[t("span",{class:y(o.openingAnnounced?"text-success":"text-danger")},"open",2),m("/"),t("span",{class:y(o.closingAnnounced?"text-success":"text-danger")},"close",2)])]),_:1},8,["data"])):k("",!0),i.missions.length?(l(),I(c,{key:1})):k("",!0)]),t("div",Xe,[Ze,t("button",{class:"btn btn-sm btn-info w-100 mb-2",onClick:s[2]||(s[2]=o=>i.loadClassifiedArtists(o))}," Load artists eligible for Classified quest "),sn,t("div",null,[t("ul",null,[(l(!0),u($,null,v(i.classifiedArtists,o=>(l(),u("li",{key:o.id},[m(d(o.label)+" ",1),t("span",tn,d(i.countValidSongs(o.songs)),1)]))),128))])])]),r(b),i.selectedMission?(l(),I(n,{key:0,mission:i.selectedMission,onUpdateMission:s[3]||(s[3]=o=>i.updateMission(o))},null,8,["mission"])):k("",!0)])}const un=V(Qe,[["render",en],["__scopeId","data-v-419abe98"]]);export{un as default};
