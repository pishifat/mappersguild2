import{d as g,m as b,z as C,A as v,_ as $,o,e as n,i as p,w as u,F as c,r as h,c as m,T as k,k as l,a as s,b as B,f as N,p as f}from"./index-72b83cfa.js";import{B as U,E as S}from"./EditBeatmapModal-67eaafc7.js";import"./task-21eeb954.js";import"./TasksChoice-65117450.js";import"./UserLinkList-5016627a.js";import"./ModalDialog-9bb90b26.js";const V={namespaced:!0,state:{beatmaps:[],selectedBeatmap:null},mutations:{setBeatmaps(e,t){e.beatmaps=t,e.selectedBeatmap=t[0]},setSelectedBeatmap(e,t){e.selectedBeatmap=t}},getters:{osuBeatmaps:e=>e.beatmaps.filter(t=>t.mode=="osu"),taikoBeatmaps:e=>e.beatmaps.filter(t=>t.mode=="taiko"),catchBeatmaps:e=>e.beatmaps.filter(t=>t.mode=="catch"),maniaBeatmaps:e=>e.beatmaps.filter(t=>t.mode=="mania")}},M=V,E=g({name:"WorldCupPage",components:{BeatmapCard:U,EditBeatmapModal:S},data(){return{osuNote:"",taikoNote:"",catchNote:"",maniaNote:""}},computed:{...b(["loggedInUser"]),...b("worldCup",["beatmaps","selectedBeatmap"]),...C("worldCup",["osuBeatmaps","taikoBeatmaps","catchBeatmaps","maniaBeatmaps"])},beforeCreate(){this.$store.hasModule("worldCup")||this.$store.registerModule("worldCup",M)},async created(){const e=await this.$http.initialRequest("/worldCup/query");if(!this.$http.isError(e)){this.$store.commit("worldCup/setBeatmaps",e.beatmaps);for(const t of e.notes)switch(t.name){case"osu":this.osuNote=t.content;break;case"taiko":this.taikoNote=t.content;break;case"catch":this.catchNote=t.content;break;case"mania":this.maniaNote=t.content;break}}},methods:{...v("worldCup",["setSelectedBeatmap"]),async updateNote(e,t,y){const d=await this.$http.executePost(`/worldCup/updateNote/${e}`,{note:t},y);if(!this.$http.isError(d))switch(e){case"osu":this.osuNotes=d;break;case"taiko":this.taikoNotes=d;break;case"catch":this.catchNotes=d;break;case"mania":this.maniaNotes=d;break}}}}),P={key:0,class:"container card card-body py-3 my-3"},T=s("h4",null,"osu!",-1),q={key:0,class:"ms-5 text-secondary"},F={class:"mt-2"},G=s("h5",null,"notes",-1),W={key:1,class:"container card card-body py-3 my-3"},_=s("h4",null,"osu!taiko",-1),z={key:0,class:"ms-5 text-secondary"},A={class:"mt-2"},D=s("h5",null,"notes",-1),I={key:2,class:"container card card-body py-3 my-3"},L=s("h4",null,"osu!catch",-1),R={key:0,class:"ms-5 text-secondary"},j={class:"mt-2"},H=s("h5",null,"notes",-1),J={key:3,class:"container card card-body py-3 my-3"},K=s("h4",null,"osu!mania",-1),O={key:0,class:"ms-5 text-secondary"},Q={class:"mt-2"},X=s("h5",null,"notes",-1);function Y(e,t,y,d,Z,x){const i=f("beatmap-card"),w=f("edit-beatmap-modal");return o(),n("div",null,[e.osuBeatmaps?(o(),n("div",P,[T,p(k,{name:"list",tag:"div",class:"row"},{default:u(()=>[(o(!0),n(c,null,h(e.osuBeatmaps,a=>(o(),m(i,{key:a.id,beatmap:a,"onUpdate:selectedBeatmap":t[0]||(t[0]=r=>e.setSelectedBeatmap(r))},null,8,["beatmap"]))),128))]),_:1}),e.osuBeatmaps.length?l("",!0):(o(),n("p",q," None... ")),s("div",F,[G,B(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.osuNote=a),class:"ml-1 form-control form-control-sm",placeholder:"click outside the box to save...",maxlength:"40000",rows:"3",onChange:t[2]||(t[2]=a=>e.updateNote("osu",e.osuNote,a))},null,544),[[N,e.osuNote]])])])):l("",!0),e.taikoBeatmaps?(o(),n("div",W,[_,p(k,{name:"list",tag:"div",class:"row"},{default:u(()=>[(o(!0),n(c,null,h(e.taikoBeatmaps,a=>(o(),m(i,{key:a.id,beatmap:a,"onUpdate:selectedBeatmap":t[3]||(t[3]=r=>e.setSelectedBeatmap(r))},null,8,["beatmap"]))),128))]),_:1}),e.taikoBeatmaps.length?l("",!0):(o(),n("p",z," None... ")),s("div",A,[D,B(s("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>e.taikoNote=a),class:"ml-1 form-control form-control-sm",placeholder:"click outside the box to save...",maxlength:"40000",rows:"3",onChange:t[5]||(t[5]=a=>e.updateNote("taiko",e.taikoNote,a))},null,544),[[N,e.taikoNote]])])])):l("",!0),e.catchBeatmaps?(o(),n("div",I,[L,p(k,{name:"list",tag:"div",class:"row"},{default:u(()=>[(o(!0),n(c,null,h(e.catchBeatmaps,a=>(o(),m(i,{key:a.id,beatmap:a,"onUpdate:selectedBeatmap":t[6]||(t[6]=r=>e.setSelectedBeatmap(r))},null,8,["beatmap"]))),128))]),_:1}),e.catchBeatmaps.length?l("",!0):(o(),n("p",R," None... ")),s("div",j,[H,B(s("textarea",{"onUpdate:modelValue":t[7]||(t[7]=a=>e.catchNote=a),class:"ml-1 form-control form-control-sm",placeholder:"click outside the box to save...",maxlength:"40000",rows:"3",onChange:t[8]||(t[8]=a=>e.updateNote("catch",e.catchNote,a))},null,544),[[N,e.catchNote]])])])):l("",!0),e.maniaBeatmaps?(o(),n("div",J,[K,p(k,{name:"list",tag:"div",class:"row"},{default:u(()=>[(o(!0),n(c,null,h(e.maniaBeatmaps,a=>(o(),m(i,{key:a.id,beatmap:a,"onUpdate:selectedBeatmap":t[9]||(t[9]=r=>e.setSelectedBeatmap(r))},null,8,["beatmap"]))),128))]),_:1}),e.maniaBeatmaps.length?l("",!0):(o(),n("p",O," None... ")),s("div",Q,[X,B(s("textarea",{"onUpdate:modelValue":t[10]||(t[10]=a=>e.maniaNote=a),class:"ml-1 form-control form-control-sm",placeholder:"click outside the box to save...",maxlength:"40000",rows:"3",onChange:t[11]||(t[11]=a=>e.updateNote("mania",e.maniaNote,a))},null,544),[[N,e.maniaNote]])])])):l("",!0),e.selectedBeatmap?(o(),m(w,{key:4,"selected-beatmap":e.selectedBeatmap},null,8,["selected-beatmap"])):l("",!0)])}const le=$(E,[["render",Y]]);export{le as default};
