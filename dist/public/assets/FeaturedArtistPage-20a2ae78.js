import{d as A,_ as h,o as i,e as a,a as d,i as l,w as _,F as k,r as I,t as c,k as b,q as u,b as $,f as y,j as v,m as L,c as U}from"./index-c0553a8f.js";import{F as C}from"./FeaturedArtistInfo-6e1af99b.js";import{C as F}from"./CopyPaste-5fa800a9.js";import{A as S}from"./AddArtist-d6d57d3b.js";import{D as M}from"./DataTable-01b5580b.js";import"./ModalDialog-ed4667a7.js";const T=A({name:"RecentLicensedSongs",components:{CopyPaste:F},data(){return{songs:[]}},methods:{async findRecentlyLicensedSongs(e){const t=await this.$http.executeGet("/admin/featuredArtists/findRecentlyLicensedSongs",e);t&&!t.error&&(this.songs=t.songs)}}}),D={class:"container card card-body py-3 my-2"},N=d("h5",null,"Recently licensed songs",-1),V={key:0};function B(e,t,s,r,f,g){const m=u("copy-paste");return i(),a("div",D,[N,d("button",{class:"btn btn-sm w-100 btn-info",onClick:t[0]||(t[0]=n=>e.findRecentlyLicensedSongs(n))}," Load recently licensed songs "),e.songs.length?(i(),a("div",V,[l(m,{distinct:"songs"},{default:_(()=>[(i(!0),a(k,null,I(e.songs,(n,p)=>(i(),a("div",{key:p},c(n.artist)+" - "+c(n.title),1))),128))]),_:1})])):b("",!0)])}const P=h(T,[["render",B]]),z=A({name:"ArtistRankedMaps",components:{CopyPaste:F},data(){return{artists:[],date:"2024-01-01",threshold:0}},methods:{async loadArtists(e){const t=await this.$http.executePost("/admin/featuredArtists/loadArtistsWithoutRankedMaps",{date:this.date,threshold:this.threshold},e);t&&!t.error&&(this.artists=t.artists)}}}),E={class:"container card card-body py-3 my-2"},G=d("h5",null,"Recently Ranked maps",-1),O=d("div",{class:"mb-2"}," Load artists who've had less than x maps Ranked in specific timeframe ",-1),j={class:"row mb-2 mx-1"},x={key:0},q=["href"];function W(e,t,s,r,f,g){const m=u("copy-paste");return i(),a("div",E,[G,O,d("div",j,[$(d("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.date=n),class:"form-control form-control-sm mx-2 w-25",type:"date",autocomplete:"off",placeholder:"how far back to check"},null,512),[[y,e.date]]),$(d("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>e.threshold=n),class:"form-control form-control-sm mx-2 w-25",type:"number",autocomplete:"off",placeholder:"how many maps"},null,512),[[y,e.threshold]]),d("button",{class:"btn btn-sm btn-info w-25",onClick:t[2]||(t[2]=n=>e.loadArtists(n))}," Load artists ")]),e.artists.length?(i(),a("div",x,[l(m,{distinct:"artists"},{default:_(()=>[(i(!0),a(k,null,I(e.artists,(n,p)=>(i(),a("div",{key:p},[v(c(n.rankedMaps)+" - ",1),d("a",{href:`https://osu.ppy.sh/beatmaps/artists/${n.osuId}`},c(n.name),9,q)]))),128))]),_:1})])):b("",!0)])}const H=h(z,[["render",W]]),J={state:{featuredArtists:[]},mutations:{setFeaturedArtists(e,t){e.featuredArtists=t},updateOsuId(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.osuId=t.osuId)},updateName(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.label=t.name)},updateReferenceUrl(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.referenceUrl=t.referenceUrl)},updateOszTemplatesUrl(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.oszTemplatesUrl=t.oszTemplatesUrl)},updateOfferedUsers(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.offeredUsers=t.offeredUsers)},addSong(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&s.songs.push(t.song)},updateSong(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);if(s){const r=s.songs.findIndex(f=>f.id==t.song.id);r!==-1&&(s.songs[r]=t.song)}},deleteSong(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);if(s){const r=s.songs.findIndex(f=>f.id==t.songId);r!==-1&&s.songs.splice(r,1)}},updateNotes(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.notes=t.notes)},updateLastReviewed(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.lastReviewed=t.lastReviewed)},updatePermanentlyDismiss(e,t){const s=e.featuredArtists.find(r=>r.id==t.featuredArtistId);s&&(s.permanentlyDismiss=t.permanentlyDismiss)}}},K=J,Q=A({components:{DataTable:M,FeaturedArtistInfo:C,RecentLicensedSongs:P,ArtistRankedMaps:H,AddArtist:S},data(){return{selectedFeaturedArtistId:""}},computed:{...L({featuredArtists:e=>e.artistsAdmin.featuredArtists}),selectedFeaturedArtist(){return this.featuredArtists.find(e=>e.id===this.selectedFeaturedArtistId)}},beforeCreate(){this.$store.hasModule("artistsAdmin")||this.$store.registerModule("artistsAdmin",K)},unmounted(){this.$store.hasModule("artistsAdmin")&&this.$store.unregisterModule("artistsAdmin")},methods:{async loadRelevantFeaturedArtists(e){const t=await this.$http.executeGet("/admin/featuredArtists/loadRelevant",e);this.$http.isError(t)||this.$store.commit("setFeaturedArtists",t)},async loadAllFeaturedArtists(e){const t=await this.$http.executeGet("/admin/featuredArtists/loadAll",e);this.$http.isError(t)||this.$store.commit("setFeaturedArtists",t)}}}),X={class:"container card card-body py-3"},Y=d("h5",null,[v(" Featured Artists list "),d("button",{class:"btn btn-sm btn-outline-info ms-2","data-bs-toggle":"modal","data-bs-target":"#addArtist"}," Add artist ")],-1),Z=["href"],tt={key:1};function et(e,t,s,r,f,g){const m=u("data-table"),n=u("recent-licensed-songs"),p=u("artist-ranked-maps"),w=u("featured-artist-info"),R=u("add-artist");return i(),a("div",null,[d("div",X,[Y,d("button",{class:"btn btn-sm btn-info w-100",onClick:t[0]||(t[0]=o=>e.loadRelevantFeaturedArtists(o))}," Load (relevant) Featured Artists "),d("button",{class:"btn btn-sm btn-info w-100 mt-2",onClick:t[1]||(t[1]=o=>e.loadAllFeaturedArtists(o))}," Load (all) Featured Artists "),e.featuredArtists.length?(i(),U(m,{key:0,class:"mt-2",data:e.featuredArtists,headers:["ARTIST"],"custom-data-target":"#editFeaturedArtist","onUpdate:selectedId":t[2]||(t[2]=o=>e.selectedFeaturedArtistId=o)},{default:_(({obj:o})=>[d("td",null,[o.osuId?(i(),a("a",{key:0,href:"https://osu.ppy.sh/beatmaps/artists/"+o.osuId,target:"_blank"},c(o.label),9,Z)):(i(),a("span",tt,c(o.label),1))])]),_:1},8,["data"])):b("",!0)]),l(n),l(p),l(w,{"featured-artist":e.selectedFeaturedArtist},null,8,["featured-artist"]),l(R,{"is-announced":!0})])}const ot=h(Q,[["render",et]]);export{ot as default};
